{"analyzedAt":"2021-08-19T21:25:38.146Z","collected":{"metadata":{"name":"karma-typescript","scope":"unscoped","version":"5.5.2","description":"Simplifying running unit tests with coverage for Typescript projects.","keywords":["angularjs","angular2","browserify","commonjs","coverage","css modules","docker","istanbul","jasmine","karma","karma plugin","karma-plugin","mocha","postcss","react","remap","transpile","typescript","unit test"],"date":"2021-08-19T20:26:36.937Z","author":{"name":"monounity"},"publisher":{"username":"erikbarke","email":"e@barke.nu"},"maintainers":[{"username":"erikbarke","email":"e@barke.nu"},{"username":"monounity","email":"work@barke.nu"}],"contributors":[{"name":"erikbarke"},{"name":"mitchhentges"},{"name":"Hobart2967"},{"name":"xdamman"},{"name":"devoto13"},{"name":"sir-marc"},{"name":"cleavera"},{"name":"abraham"},{"name":"adamkasztenny"},{"name":"wawyed"},{"name":"jods4"},{"name":"alan-agius4"},{"name":"FreshRob"},{"name":"glennvorhes"},{"name":"fchiumeo"},{"name":"moshmage"},{"name":"tokrsen"},{"name":"g00fy-"},{"name":"kubut"},{"name":"VilleSalonen"},{"name":"yugi03"},{"name":"gempain"},{"name":"monounity"},{"name":"ggradnig"},{"name":"sridharmallela"},{"name":"leevipietilainen"},{"name":"vladjerca"},{"name":"csvn"},{"name":"ryanvall"}],"repository":{"type":"git","url":"git+https://github.com/monounity/karma-typescript.git"},"links":{"npm":"https://www.npmjs.com/package/karma-typescript","homepage":"https://github.com/monounity/karma-typescript#readme","repository":"https://github.com/monounity/karma-typescript","bugs":"https://github.com/monounity/karma-typescript/issues"},"license":"MIT","dependencies":{"acorn":"^8.1.0","acorn-walk":"^8.0.2","assert":"^2.0.0","async":"^3.0.1","browser-resolve":"^2.0.0","browserify-zlib":"^0.2.0","buffer":"^5.4.3","combine-source-map":"^0.8.0","console-browserify":"^1.2.0","constants-browserify":"^1.0.0","convert-source-map":"^1.7.0","crypto-browserify":"^3.12.0","diff":"^4.0.1","domain-browser":"^4.16.0","events":"^3.2.0","glob":"^7.1.6","https-browserify":"^1.0.0","istanbul-lib-coverage":"^3.0.0","istanbul-lib-instrument":"^4.0.0","istanbul-lib-report":"^3.0.0","istanbul-lib-source-maps":"^4.0.0","istanbul-reports":"^3.0.0","json-stringify-safe":"^5.0.1","lodash":"^4.17.19","log4js":"^6.3.0","minimatch":"^3.0.4","os-browserify":"^0.3.0","pad":"^3.2.0","path-browserify":"^1.0.0","process":"^0.11.10","punycode":"^2.1.1","querystring-es3":"^0.2.1","readable-stream":"^3.1.1","source-map":"^0.7.3","stream-browserify":"^3.0.0","stream-http":"^3.1.0","string_decoder":"^1.3.0","timers-browserify":"^2.0.11","tmp":"^0.2.1","tty-browserify":"^0.0.1","url":"^0.11.0","util":"^0.12.1","vm-browserify":"^1.1.2"},"devDependencies":{"@types/async":"^3.0.3","@types/browser-resolve":"^1.11.0","@types/combine-source-map":"^0.8.1","@types/convert-source-map":"^1.5.1","@types/diff":"^4.0.2","@types/glob":"^7.1.3","@types/istanbul-lib-coverage":"^2.0.3","@types/istanbul-lib-instrument":"^1.7.3","@types/istanbul-lib-report":"^3.0.0","@types/istanbul-lib-source-maps":"^4.0.0","@types/istanbul-reports":"^3.0.0","@types/karma":"^6.1.0","@types/lodash":"^4.14.159","@types/minimatch":"^3.0.3","@types/mock-require":"^2.0.0","@types/node":"^14.0.27","@types/pad":"^2.1.0","@types/tape":"^4.13.0","@types/tmp":"^0.2.0","faucet":"0.0.1","mock-require":"^3.0.3","nyc":"^15.1.0","puppeteer":"^5.2.1","tape":"^5.0.1","ts-node":"^8.10.2","typescript":"latest"},"peerDependencies":{"karma":"1 || 2 || 3 || 4 || 5 || 6","typescript":"1 || 2 || 3 || 4"},"releases":[{"from":"2021-07-20T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":0},{"from":"2021-05-21T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":0},{"from":"2021-02-20T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":2},{"from":"2020-08-19T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":5},{"from":"2019-08-20T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":14}],"hasTestScript":true,"hasSelectiveFiles":true,"readme":"# karma-typescript\n\n<a href=\"https://www.npmjs.com/package/karma-typescript\"><img alt=\"Npm Version\" src=\"https://img.shields.io/npm/v/karma-typescript.svg\"></a>\n<a href=\"https://www.npmjs.com/package/karma-typescript\"><img alt=\"Npm Total Downloads\" src=\"https://img.shields.io/npm/dt/karma-typescript.svg\"></a>\n<a href=\"https://www.npmjs.com/package/karma-typescript\"><img alt=\"Npm Monthly Downloads\" src=\"https://img.shields.io/npm/dm/karma-typescript.svg\"></a>\n<a href=\"https://travis-ci.org/monounity/karma-typescript\"><img alt=\"Travis Status\" src=\"https://img.shields.io/travis/monounity/karma-typescript/master.svg?label=travis\"></a>\n<a href=\"https://ci.appveyor.com/project/monounity/karma-typescript\"><img alt=\"Appveyor Status\" src=\"https://img.shields.io/appveyor/ci/monounity/karma-typescript/master.svg?label=appveyor\"></a>\n\n> Karma :heart: Typescript\n\n* Run unit tests written in Typescript with full type checking, seamlessly without extra build steps or scripts.\n* Get remapped test coverage with [Istanbul](https://istanbul.js.org).\n* Use plain Typescript or a framework: Angular, AngularJS, React, Sinon, any framework of choice.\n\n## Installation\n\nThe easiest way is to keep `karma-typescript` as a devDependency in `package.json`:\n\n```json\n{\n  \"devDependencies\": {\n    \"karma\": \"^6.1.0\",\n    \"karma-typescript\": \"5.5.2\"\n  }\n}\n```\n\nDo this by installing the plugin via npm:\n\n```\nnpm install --save-dev karma-typescript\n```\n\n## Configuration\n\nBare minimum configuration can be achieved with the following `karma.conf.js` file:\n\n```javascript\nmodule.exports = function(config) {\n    config.set({\n        frameworks: [\"jasmine\", \"karma-typescript\"],\n        files: [\n            \"src/**/*.ts\" // *.tsx for React Jsx\n        ],\n        preprocessors: {\n            \"**/*.ts\": \"karma-typescript\" // *.tsx for React Jsx\n        },\n        reporters: [\"progress\", \"karma-typescript\"],\n        browsers: [\"Chrome\"]\n    });\n};\n```\n\nThe above example will compile all Typescript files and run the unit tests, producing remapped coverage in `./coverage`.\n\n## Examples\n\n[Cookbook](https://github.com/monounity/karma-typescript/blob/master/packages/karma-typescript/cookbook.md)\n\n### Frameworks and Integrations\n\n- [Angular](https://github.com/monounity/karma-typescript/tree/master/examples/angular2)\n- [AngularJS](https://github.com/monounity/karma-typescript/tree/master/examples/angularjs)\n- [Docker](https://github.com/monounity/karma-typescript/tree/master/examples/docker)\n- [Gulp](https://github.com/monounity/karma-typescript/tree/master/examples/gulp)\n- [Mocha](https://github.com/monounity/karma-typescript/tree/master/examples/mocha)\n\n### Other examples\n\n- Typescript [@latest](https://github.com/monounity/karma-typescript/tree/master/examples/typescript-latest)\n- Typescript [1.8.10](https://github.com/monounity/karma-typescript/tree/master/examples/typescript-1.8.10)\n- Typescript [1.6.2](https://github.com/monounity/karma-typescript/tree/master/examples/typescript-1.6.2)\n\n### Sample applications by users\n- [Hybrid app, code in JavaScript and tests in Typescript](https://github.com/adrianmarinica/karma-typescript-angularjs-sample)\n\n## Transforms:\n- [karma-typescript-angular2-transform](https://github.com/monounity/karma-typescript/tree/master/packages/karma-typescript-angular2-transform)\n- [karma-typescript-cssmodules-transform](https://github.com/monounity/karma-typescript/tree/master/packages/karma-typescript-cssmodules-transform)\n- [karma-typescript-es6-transform](https://github.com/monounity/karma-typescript/tree/master/packages/karma-typescript-es6-transform)\n- [karma-typescript-postcss-transform](https://github.com/monounity/karma-typescript/tree/master/packages/karma-typescript-postcss-transform)\n\n### Example output\n\n<img src=\"http://i.imgur.com/sc4Mswh.png\" width=\"580\" height=\"280\" />\n\n- [Angular2 screenshot](https://github.com/monounity/karma-typescript/blob/master/assets/angular2.png)\n- [React screenshot](https://github.com/monounity/karma-typescript/blob/master/assets/react.png)\n\n## Advanced configuration\n\nThe plugin has default settings for the compiler, instrumenting files and creating reports etc, which should suit most needs.\n\nThese are the default compiler settings:\n\n```javascript\nkarmaTypescriptConfig: {\n    compilerOptions: {\n        emitDecoratorMetadata: true,\n        experimentalDecorators: true,\n        jsx: \"react\",\n        module: \"commonjs\",\n        sourceMap: true,\n        target: \"ES5\"\n    },\n    exclude: [\"node_modules\"]\n}\n```\n\nIf the defaults aren't enough, the settings can be configured from `karma.conf.js`:\n\n* **karmaTypescriptConfig.bundlerOptions.addNodeGlobals** - Boolean indicating whether the global variables\n  `process` and `Buffer` should be added to the bundle.<br/>\n  Defaults to `true`.\n\n* **karmaTypescriptConfig.bundlerOptions.constants** - An object literal with keys/values which will be available as global\n  variables in the bundle. The keys are expected to be strings and any non-string value will be stringified with `JSON.stringify`.\n\n  Configuration example:\n    ```javascript\n    constants: {\n        __STRING__: JSON.stringify(\"abc\" + 123),\n        __BOOLEAN__: true,\n        \"process.env\": {\n            \"VARIABLE\": \"value\"\n        }\n    }\n    ```\n  Code example:\n    ```javascript\n    declare var __STRING__: string;\n    declare var __BOOLEAN__: boolean;\n\n    console.log(__STRING__, __BOOLEAN__, process.env.VARIABLE);\n    ```\n\n* **karmaTypescriptConfig.bundlerOptions.entrypoints** - A `RegExp` filtering which files loaded by Karma should be executed in\n   a test run, for example only filenames ending with \".spec.ts\": `/\\.spec\\.ts$/`.<br/>\n   This setting can be used to make sure the specs have finished setting up the test environment before other code starts\n   requiring modules, which otherwise could lead to subtle bugs caused by race conditions.<br/>\n   When filtering file paths, beware that Windows uses `\\` while UNIX-like systems use `/` as path separator.<br/>\n   Defaults to all files, `/.*/`.\n\n* **karmaTypescriptConfig.bundlerOptions.exclude** - An array of npm module names that will be excluded from the bundle.\n\n* **karmaTypescriptConfig.bundlerOptions.ignore** - An array of npm module names that will be bundled as stubs, ie `module.exports = {};`.\n\n* **karmaTypescriptConfig.bundlerOptions.noParse** - An array of module names that will be bundled without being parsed for dependencies.\n\n* **karmaTypescriptConfig.bundlerOptions.resolve.alias** - An object literal where the key is a module name\n  and the value is a path that will be used when resolving the module.<br/>\n  The key is a string.\n\n* **karmaTypescriptConfig.bundlerOptions.resolve.extensions** - An array of file extensions to use, in order, when resolving modules.<br/>\n  Defaults to `[\".js\", \".json\", \".mjs\", \".ts\", \".tsx\"]`.\n\n* **karmaTypescriptConfig.bundlerOptions.resolve.directories** - An array of directories where modules will be recursively looked up.<br/>\n  Defaults to `[\"node_modules\"]`.\n\n* **karmaTypescriptConfig.bundlerOptions.sourceMap** - A boolean indicating whether source maps should be generated for imported modules in the bundle, useful for debugging in a browser.\n  For more debugging options, please see `karmaTypescriptConfig.coverageOptions.instrumentation`.</br>\n  Defaults to `false`.\n\n* **karmaTypescriptConfig.bundlerOptions.transforms** - An array of functions altering or replacing compiled Typescript code/Javascript\n  code loaded from `node_modules` before bundling it.\n  For more detailed documentation on transforms, please refer to the [Transforms API section](#transforms-api) in this document.<br/>\n\n* **karmaTypescriptConfig.bundlerOptions.validateSyntax** - A boolean indicating whether the syntax of the bundled code should be validated.\n  Setting this to `false` may speed up bundling for large projects with lots of imports from `node_modules`.<br/>\n  Defaults to `true`.\n\n* **karmaTypescriptConfig.compilerDelay** - The number of milliseconds the compiler waits before compiling the project on each run.</br>\n  For projects with a large number of files it might be necessary to increase this value to make sure the compiler has collected all files before firing.</br>\n  Defaults to 250 ms.\n\n* **karmaTypescriptConfig.compilerOptions** - This setting will override or add to existing compiler options.<br/>\n  Valid options are the same as for the `compilerOptions` section in `tsconfig.json`, with the\n  exception of `outDir`and `outFile` which are ignored since the code is compiled in-memory.\n\n  If `noEmitOnError` is set to a truthy value, in either `tsconfig.json` or in `karmaTypescriptConfig.compilerOptions`,\n  the karma process will exit with `ts.ExitStatus.DiagnosticsPresent_OutputsSkipped` if any compilation errors occur.\n\n* **karmaTypescriptConfig.coverageOptions.instrumentation** - A boolean indicating whether the code should be instrumented,\n  set this property to `false` to see the original Typescript code when debugging.\n  Please note that setting this property to `true` requires the Typescript compiler option `sourceMap` to also be set to `true`.\n  For more debugging options, please see `karmaTypescriptConfig.coverageOptions.sourceMap`.<br/>\n  Defaults to `true`.\n\n* **karmaTypescriptConfig.coverageOptions.instrumenterOptions** - Pass options to the `istanbul` instrumenter, ie options supported by [istanbul-lib-instrument](https://github.com/istanbuljs/istanbuljs/blob/master/packages/istanbul-lib-instrument/src/instrumenter.js):\n\n    ```js\n    {\n        // Name of global coverage variable.\n        coverageVariable: '__coverage__',\n\n        // Preserve comments in output.\n        preserveComments: false,\n\n        // Generate compact code.\n        compact: true,\n\n        // Set to true to instrument ES6 modules.\n        esModules: false,\n\n        // Set to true to allow `return` statements outside of functions.\n        autoWrap: false,\n\n        // Set to true to produce a source map for the instrumented code.\n        produceSourceMap: false,\n\n        // Set to array of class method names to ignore for coverage.\n        ignoreClassMethods: [],\n\n        // A callback function that is called when a source map URL is found in the original code.\n        // This function is called with the source file name and the source map URL.\n        sourceMapUrlCallback: null,\n\n        // Turn debugging on.\n        debug: false,\n\n        // Set plugins.\n        plugins: [\n            'asyncGenerators',\n            'bigInt',\n            'classProperties',\n            'classPrivateProperties',\n            'dynamicImport',\n            'importMeta',\n            'objectRestSpread',\n            'optionalCatchBinding',\n            'flow',\n            'jsx'\n        ]\n    };\n    ```\n\n* **karmaTypescriptConfig.coverageOptions.exclude** - A `RegExp` object or an array of `RegExp` objects for filtering which files should be excluded from coverage instrumentation.<br/>\n  When filtering file paths, beware that Windows uses `\\` while UNIX-like systems use `/` as path separator.<br/>\n  Defaults to `/\\.(d|spec|test)\\.ts$/i` which excludes &ast;.d.ts, &ast;.spec.ts and &ast;.test.ts (case insensitive).\n\n* **karmaTypescriptConfig.coverageOptions.threshold** - An object with minimum coverage thresholds. The threshold values can be set on\n  a global level and on a per-file level, with options to exclude files and directories, and override settings on a per-file basis using globbing patterns.<br/>\n  A positive value will be used as a minimum percentage, for example `statements: 50` means that at least 50% of the statements should be covered by a test.<br/>\n  A negative value will be used as a maximum number of uncovered items, for example `lines: 10` means that no more than 10 uncovered lines are allowed.\n    ```javascript\n    threshold: {\n        global: {\n            statements: 100,\n            branches: 100,\n            functions: -10,\n            lines: 100,\n            excludes: [\n                \"src/foo/**/*.js\"\n            ]\n        },\n        file: {\n            statements: -10,\n            branches: 100,\n            functions: 100,\n            lines: 100,\n            excludes: [\n                \"src/bar/**/*.js\"\n            ],\n            overrides: {\n                \"src/file.js\": {\n                    statements: 90\n                }\n            }\n        }\n    }\n    ```\n\n* **karmaTypescriptConfig.coverageOptions.watermarks** - An object with custom istanbul watermarks. Each value is an array consisting of\n  a lower and upper bound. If code coverage is above the upper bound, this is considered \"healthy\", and many reports will print output in green.\n  If code coverage is below the lower bound, this is considered \"unhealthy\", and many reports will print output in red. Yellow output is reserved\n  for coverage in between the lower and upper bound.\n    ```javascript\n    watermarks: {\n      lines: [75, 90],\n      functions: [75, 90],\n      branches: [75, 90],\n      statements: [75, 90]\n    }\n    ```\n\n* **karmaTypescriptConfig.exclude** - File string patterns to be excluded by the compiler. This property may be an `array` or an `object` for more fine-grained control.\n  * Array: The string values will be merged with existing options.\n  * Object: The string values will be merged with or replace existing options:\n  ```javascript\n  {\n      mode: \"merge|replace\",\n      values: [\"foo\", \"bar\"]\n  }\n  ```\n  Defaults to `[\"node_modules\"]`.\n\n* **karmaTypescriptConfig.include** - File string patterns to be included by the compiler. This property may be an `array` or an `object` for more fine-grained control.\n  * Array: The string values will be merged with existing options.\n  * Object: The string values will be merged with or replace existing options:\n  ```javascript\n  {\n      mode: \"merge|replace\",\n      values: [\"foo\", \"bar\"]\n  }\n  ```\n  This option is available in Typescript ^2.0.0.\n\n* **karmaTypescriptConfig.reports** - The types of coverage reports that should be created when running the tests,\n  defaults to an html report in the directory `./coverage`.\n  Reporters are configured as `\"reporttype\": destination` where the destination can be specified in three ways:\n\n    * A `string` with a directory path, for example `\"html\": \"coverage\"`.\n    * An empty string or `null`. Writes the output to the console, for example `\"text-summary\": \"\"`. This is only possible for a subset of the reports available.\n    * An `object` with more fine-grained control over path and filename:\n    ```javascript\n    \"cobertura\": {\n        \"directory\": \"coverage\",    // optional, defaults to 'coverage'\n        \"subdirectory\": \"cobertura\" // optional, defaults to the name of the browser running the tests\n        \"filename\": \"coverage.xml\", // optional, defaults to the report name\n    }\n\n    // \"subdirectory\" may also be a function that returns a directory from a given browser\n    \"cobertura\": {\n        \"directory\": \"coverage\",\n        \"subdirectory\": function(browser) {\n            // normalizes browser name directories to lowercase without version\n            // ex: coverage/chrome/coverage.xml\n            return browser.name.toLowerCase().split(' ')[0];\n        },\n        \"filename\": \"coverage.xml\"\n    }\n    ```\n\n    * Available report types:\n        * `\"clover\": destination`\n        * `\"cobertura\": destination`\n        * `\"html\": destination`\n        * `\"html-spa\": destination`\n        * `\"json-summary\": destination`\n        * `\"json\": destination`\n        * `\"lcovonly\": destination`\n        * `\"teamcity\": destination` (redirects to the console with destination \"\" or `null`)\n        * `\"text-lcov\": destination` (redirects to the console with destination \"\" or `null`)\n        * `\"text-summary\": destination` (redirects to the console with destination \"\" or `null`)\n        * `\"text\": destination` (redirects to the console with destination \"\" or `null`)\n\n    * Example of the three destination types:\n    ```javascript\n    karmaTypescriptConfig: {\n        reports:\n        {\n            \"cobertura\": {\n                \"directory\": \"coverage\",\n                \"filename\": \"coverage.xml\",\n                \"subdirectory\": \"cobertura\"\n            },\n            \"html\": \"coverage\",\n            \"text-summary\": \"\"\n        }\n    }\n    ```\n\n* **karmaTypescriptConfig.transformPath** - A function for renaming compiled file extensions to `.js`.<br/>\n  Defaults to renaming `.ts` and `.tsx` to `.js`.\n\n* **karmaTypescriptConfig.tsconfig** - A path to a `tsconfig.json` file.<br/>\n  The default compiler options will be replaced by the options in this file.<br/>\n  The directory of the `tsconfig.json` file will be used as the base path for the Typescript compiler, and if `karmaTypescriptConfig.tsconfig` isn't set, the `basePath` property of the Karma config will be used as the\n  compiler base path instead.\n\n* **karmaTypescriptConfig.stopOnFailure** - Stop on any compiler error.<br/>\n  By default karma will stop when any typescript compile errors are encountered.<br/>\n  Setting this to false will allow tests to be run when typescript compile errors are present.\n\nExample of a full `karmaTypescriptConfig` configuration:\n\n```javascript\nkarmaTypescriptConfig: {\n    bundlerOptions: {\n        addNodeGlobals: true,\n        constants: {\n            __PRODUCTION__: false\n        },\n        entrypoints: /\\.spec\\.(ts|tsx)$/,\n        exclude: [\"react/addons\"],\n        ignore: [\"ws\"],\n        noParse: \"jquery\",\n        resolve: {\n            alias: {\n                \"@angular/upgrade/static$\": \"../bundles/upgrade-static.umd.js\"\n            },\n            extensions: [\".js\", \".json\"],\n            directories: [\"node_modules\"]\n        },\n        sourceMap: false,\n        transforms: [require(\"karma-typescript-es6-transform\")()],\n        validateSyntax: true\n    },\n    compilerDelay: 500,\n    compilerOptions: {\n        noImplicitAny: true,\n    },\n    coverageOptions: {\n        instrumentation: true,\n        instrumenterOptions: {\n            preserveComments: true\n        },\n        exclude: /\\.(d|spec|test)\\.ts/i,\n        threshold: {\n            global: {\n                statements: 100,\n                branches: 100,\n                functions: -10,\n                lines: 100,\n                excludes: [\n                    \"src/foo/**/*.js\"\n                ]\n            },\n            file: {\n                statements: -10,\n                branches: 100,\n                functions: 100,\n                lines: 100,\n                excludes: [\n                    \"src/bar/**/*.js\"\n                ],\n                overrides: {\n                    \"src/file.js\": {\n                        statements: 90\n                    }\n                }\n            }\n        },\n    },\n    exclude: [\"broken\"],\n    include: {\n        mode: \"replace\",\n        values: [\"**/*.ts\"]\n    },\n    reports: {\n        \"cobertura\": {\n            \"directory\": \"coverage\",\n            \"filename\": \"cobertura/coverage.xml\"\n        },\n        \"html\": \"coverage\",\n        \"text-summary\": \"\"\n    },\n    transformPath: function(filepath) {\n        return filepath.replace(/\\.(ts|tsx)$/, \".js\");\n    },\n    tsconfig: \"./tsconfig.json\",\n    stopOnFailure: false\n}\n```\n\n## Automatic bundling\n\nFiles executed in the test run are bundled into a main bundle, containing dependencies required from node_modules,\nand several smaller standalone bundles containing the Typescript files. All these bundles are tied together by `commonjs.js`,\nwhich acts as a hub, loading modules when they are required by other modules.\n\nAll files are bundled by being wrapped in a custom [CommonJS](https://en.wikipedia.org/wiki/CommonJS) wrapper,\nwhich emulates the Node.js module system by injecting the require function, the module object, the exports object,\nthe &#95;&#95;dirname variable and the &#95;&#95;filename variable.\n\nFor instance, this Typescript sample:\n\n```javascript\nexport function exportedFunction(): string {\n    return \"\";\n}\n```\n\nWould be compiled to the following JavaScript (assuming the compiler option `module` is set to `commonjs`):\n\n```javascript\nfunction exportedFunction() {\n    return \"\";\n}\nexports.exportedFunction = exportedFunction;\n```\n\nIt would then be wrapped in a `CommonJS` wrapper by the bundler:\n\n```javascript\n(function(global){\n    global.wrappers['/absolutepath/app/src/file.ts']=[function(require,module,exports,__dirname,__filename){\n        function exportedFunction() {\n            return \"\";\n        }\n        exports.exportedFunction = exportedFunction;\n    },'src/file.ts',{}];\n})(this);\n```\n\n*(In this example, the source map and a few other statements have been omitted for brevity and the wrapper has been formatted for readability)*\n\nAfter compilation, a simple static analysis is performed to find \"import\" and \"require\" statements in the code and if any\ndependencies are found, for instance `import { Component } from \"@angular/core\";`, it is added to the main bundle file along\nwith its dependencies.\n\nIf no import or require statements are found in any Typescript file included in the test run, or the compiler option `module`\nis set to another value than `commonjs`, *automatic bundling will not occur*.\n\nThis means that no Typescript file will be wrapped in the CommonJS wrapper and the reason behind this is the encapsulation that\nthe Node.js module system provides. If no module requests any other module, the test run would contain only isolated islands of\ncode unreachable from the global scope, there would be nothing to execute.\n\nHowever, this intentional behavior makes it possible to use karma-typescript for projects that use the Typescript module system,\nor have the compiler option `module` set to another value than `commonjs`, or simply put everything on the global scope.\n\n### Importing stylesheets and bundling for production\n\nStyle files (.css|.less|.sass|.scss) are served as JSON strings to the browser running the tests,\nallowing styles to be loaded using the Typescript import statement, ie `import \"./style/app.scss\";`.\n\nThis means styles can be imported in order to let, for instance, webpack load the styles with\nless-loader or scss-loader etc for bundling later on, without breaking the unit test runner.\n\nNote: JSON required by modules in node_modules will be loaded automatically by the bundler.\n\n### The module object\n\n```javascript\nmodule: {\n    exports: {},\n    id: \"project-relative-path/bar.ts\",\n    uri: \"/absolute-path/project-relative-path/bar.ts\"\n}\n```\n\nThe `module.id` will be calculated from the value of `module.uri`, relative to the Karma config `basePath` value.\n\nModules exporting an extensible object such as a *function* or an *object literal* will also be decorated with\na non-enumerable `default` property if `module.exports.default` is undefined.\n\n### Globals\n\nA full Node.js environment will be provided with global variables and browser shims for builtin core modules:\n\n* &#95;&#95;dirname\n* &#95;&#95;filename\n* Buffer\n* global\n* process\n\n### Browser shims\n* [assert](https://www.npmjs.com/package/assert)\n* [buffer](https://www.npmjs.com/package/buffer)\n* [console](https://www.npmjs.com/package/console-browserify)\n* [constants](https://www.npmjs.com/package/constants-browserify)\n* [crypto](https://www.npmjs.com/package/crypto-browserify)\n* [domain](https://www.npmjs.com/package/domain-browser)\n* [events](https://www.npmjs.com/package/events)\n* [http](https://www.npmjs.com/package/stream-http)\n* [https](https://www.npmjs.com/package/https-browserify)\n* [os](https://www.npmjs.com/package/os-browserify)\n* [path](https://www.npmjs.com/package/path-browserify)\n* [punycode](https://www.npmjs.com/package/punycode)\n* [querystring](https://www.npmjs.com/package/querystring-es3)\n* [stream](https://www.npmjs.com/package/stream-browserify)\n* [string_decoder](https://www.npmjs.com/package/string_decoder)\n* [timers](https://www.npmjs.com/package/timers-browserify)\n* [tty](https://www.npmjs.com/package/tty-browserify)\n* [url](https://www.npmjs.com/package/url)\n* [util](https://www.npmjs.com/package/util)\n* [vm](https://www.npmjs.com/package/vm-browserify)\n* [zlib](https://www.npmjs.com/package/browserify-zlib)\n\nThe plugin uses [browser-resolve](https://github.com/defunctzombie/node-browser-resolve) from the [browserify](https://github.com/substack/node-browserify) tool chain to load the source code from node_modules.\n\n### Mocking\nImported modules, local or npm packages, can be mocked using [karma-typescript-mock](https://www.npmjs.com/package/karma-typescript-mock). This feature is available in `karma-typescript@^3.0.5`.\n\n## Transforms API\n\nThe bundler has a public API which lets plugins alter or completely replace code before adding it to the bundle.\nFor example, a plugin could compile ES2015 JavaScript code to to ES5 syntax, making it possible to import an `npm` module\nwritten in ES2015 syntax from a Typescript module directly.\n\nThe interface between the bundler and the plugins is a plain array of functions, specified in the configuration property `karmaTypescriptConfig.bundlerOptions.transforms`, where each function is considered a transforming plugin.\n\nThe plugin functions in the transforms array are asynchronous and adhere to the Node.js callback convention where the first\nargument of the callback function is an `Error` object or `undefined` and the following parameters contains the result.\nHowever, although each function is asynchronous, all functions will be called *synchronously* one by one in the order they were added to the array, and each function will be called with the result of the previous function, enabling transforms plugin chaining.\n\nTransforms will be executed at two points in the bundling process: right after compilation of the project Typescript files\nand when resolving `import` and `require` statements. This means each transforming function will be called for both\nTypescript files and JavaScript files from `node_modules`, making each plugin implementation responsible for validating the\ncontext before performing any logic, for example by checking the file name, module name or the existence of an ast object etc.\n\nEach transforming function will be executed before resolving dependencies, which means paths in `import` or `require` statements\nor anywhere in the code can be rewritten before bundling, to fit the Karma execution environment.\n\nExample of a simple inline transforming function replacing the contents of a `.css` file, mimicking the behavior of Css Modules:\n\n```javascript\nkarmaTypescriptConfig: {\n    bundlerOptions: {\n        transforms: [\n            function(context, callback) {\n                if(context.module === \"./main.css\") {\n                    context.source = \"module.exports = { color: red };\";\n                    return callback(undefined, true);\n                }\n                return callback(undefined, false);\n            }\n        ]\n    }\n}\n```\n\nIt is also possible to change the transpiled Typescript (ie the plain JavaScript code) code by using the third callback parameter to tell the Transforms API not to recompile the transpiled code:\n\n```javascript\nkarmaTypescriptConfig: {\n    bundlerOptions: {\n        transforms: [\n            function(context, callback) {\n                if(context.ts) {\n                    context.ts.transpiled = \"\\n/* istanbul ignore next */\\n\" + context.ts.transpiled;\n                    return callback(undefined, true, false);\n                }\n                return callback(undefined, false);\n            }\n        ]\n    }\n}\n```\n\n### Context\nThe context object, `TransformContext`, is defined [here](https://github.com/monounity/karma-typescript/blob/master/src/api/transforms.ts).\n\n### Callback\n\nThe callback has two signatures, the \"boolean\" and the \"object\".\n\nThe boolean callback function has three arguments:\n1. An `Error` object or `undefined`\n2. A boolean indicating whether the value of `context.source` has changed or not.\n3. A boolean indicating whether the transformed source should be recompiled. Defaults to true and can be omitted.\n\nThe object callback function has two arguments:\n\n1. An `Error` object or `undefined`\n2. An object literal, which has the following properties:\n    1. A boolean indicating whether the value of `context.source` has changed or not.\n    2. A boolean indicating whether the transformed source should be recompiled (Typescript only!).\n    3. A boolean indicating whether a new AST should be created for the transformed source (JavaScript only!).\n\n## Requirements\n\nTypescript ^1.6.2 is required.\n\nVersions 1.6.2 - 1.7.5 work but aren't as heavily tested as versions 1.8.10 and up.\n\n## Troubleshooting\n\n### Error: Can not load \"karma-typescript\", it is not registered!\n\nUsers have reported success by simply deleting the `node_modules` folder and then running `npm install` again.\n\n### Error: Cannot find module 'buffer/' from '.'\n\n*Note: this error has been fixed in karma-typescript@^3.0.0`.*\n\nThis error seems to hit mostly users of with older versions of `npm`, where all dependencies don't get pulled in automatically by `npm`.\n\nThere's a workaround reported by users, which is simply adding the missing dependencies explicitly to `package.json`:\n\n * `npm install --save-dev browser-resolve`\n * `npm install --save-dev buffer`\n * `npm install --save-dev process`\n\nOther workarounds are running `npm install` twice or, if possible, upgrading to a newer version of `npm`.\n\nThese are the environments reported failing/working:\n\n|Npm|Node.js|OS|Works|\n|---|---|---|---|\n|2.5.18|4.4.7|Unknown|No|\n|2.14.7|4.2.1|Ubuntu 14.04|No|\n|2.14.12|4.2.6|OSX 10.11.3|No|\n|2.15.9|4.5.0|OSX 10.11.6|No|\n|2.15.9|4.6.0|OSX 10.12.3|No|\n|2.15.11|4.6.2|Ubuntu 14.04|No|\n|2.15.11|4.7.0|Ubuntu 14.04|Yes|\n|3.5.3|4.2.1|Windows 10|Yes|\n|3.8.6|6.10.0|Windows Server 2012 R2|Yes|\n|3.10.3|6.4.0|OSX 10.11.6|Yes|\n|3.10.9|6.9.2|Ubuntu 14.04|Yes|\n|4.0.5|6.4.0|OSX 10.11.6|Yes|\n|4.1.2|7.5.0|OSX 10.12.2|No|\n|4.1.2|7.7.3|Ubuntu 14.04|Yes|\n\n## Licensing\n\nThis software is licensed with the MIT license.\n\nÂ© 2016-2021 Erik Barke, Monounity"},"npm":{"downloads":[{"from":"2021-08-18T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":9089},{"from":"2021-08-12T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":46115},{"from":"2021-07-20T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":212790},{"from":"2021-05-21T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":614965},{"from":"2021-02-20T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":1180958},{"from":"2020-08-19T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":2122580}],"dependentsCount":19,"starsCount":9},"github":{"starsCount":304,"forksCount":107,"subscribersCount":5,"issues":{"count":490,"openCount":42,"distribution":{"3600":18,"10800":25,"32400":24,"97200":57,"291600":57,"874800":96,"2624400":57,"7873200":61,"23619600":53,"70858800":26,"212576400":16},"isDisabled":false},"contributors":[{"username":"silkentrance","commitsCount":1},{"username":"g00fy-","commitsCount":1},{"username":"peterblazejewicz","commitsCount":3},{"username":"moshmage","commitsCount":1},{"username":"tokrsen","commitsCount":1},{"username":"csvn","commitsCount":1},{"username":"fchiumeo","commitsCount":1},{"username":"vladjerca","commitsCount":4},{"username":"provegard","commitsCount":1},{"username":"xdamman","commitsCount":7},{"username":"abraham","commitsCount":2},{"username":"adamkasztenny","commitsCount":1},{"username":"leevipietilainen","commitsCount":6},{"username":"devoto13","commitsCount":3},{"username":"danielrentz","commitsCount":1},{"username":"ryanvall","commitsCount":1},{"username":"sir-marc","commitsCount":3},{"username":"jods4","commitsCount":1},{"username":"07akioni","commitsCount":4},{"username":"mattwebbio","commitsCount":1},{"username":"Hobart2967","commitsCount":8},{"username":"mitchhentges","commitsCount":11},{"username":"glennvorhes","commitsCount":1},{"username":"vidartf","commitsCount":2},{"username":"cleavera","commitsCount":2},{"username":"FreshRob","commitsCount":1},{"username":"erikbarke","commitsCount":874},{"username":"alan-agius4","commitsCount":1},{"username":"wawyed","commitsCount":1}],"commits":[{"from":"2021-08-12T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":15},{"from":"2021-07-20T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":18},{"from":"2021-05-21T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":25},{"from":"2021-02-20T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":50},{"from":"2020-08-19T00:00:00.000Z","to":"2021-08-19T00:00:00.000Z","count":81}],"statuses":[{"context":"continuous-integration/appveyor/branch","state":"success"}]},"source":{"files":{"readmeSize":29985,"testsSize":6029},"badges":[{"urls":{"original":"https://img.shields.io/npm/v/karma-typescript.svg","shields":"https://img.shields.io/npm/v/karma-typescript.svg","content":"https://img.shields.io/npm/v/karma-typescript.json"},"info":{"service":"npm","type":"version","modifiers":{"type":"v"}}},{"urls":{"original":"https://img.shields.io/npm/dt/karma-typescript.svg","shields":"https://img.shields.io/npm/dt/karma-typescript.svg","content":"https://img.shields.io/npm/dt/karma-typescript.json"},"info":{"service":"npm","type":"downloads","modifiers":{"type":"dt"}}},{"urls":{"original":"https://img.shields.io/npm/dm/karma-typescript.svg","shields":"https://img.shields.io/npm/dm/karma-typescript.svg","content":"https://img.shields.io/npm/dm/karma-typescript.json"},"info":{"service":"npm","type":"downloads","modifiers":{"type":"dm"}}},{"urls":{"original":"https://img.shields.io/travis/monounity/karma-typescript/master.svg?label=travis","service":"https://api.travis-ci.org/monounity/karma-typescript.svg?branch=master","shields":"https://img.shields.io/travis/monounity/karma-typescript/master.svg","content":"https://img.shields.io/travis/monounity/karma-typescript/master.json"},"info":{"service":"travis","type":"build","modifiers":{"branch":"master"}}},{"urls":{"original":"https://img.shields.io/appveyor/ci/monounity/karma-typescript/master.svg?label=appveyor","service":"https://ci.appveyor.com/api/projects/status/monounity/karma-typescript/branch/master","shields":"https://img.shields.io/appveyor/ci/monounity/karma-typescript/master.svg","content":"https://img.shields.io/appveyor/ci/monounity/karma-typescript/master.json"},"info":{"service":"appveyor","type":"build","modifiers":{"branch":"master"}}}],"linters":["editorconfig","eslint"],"outdatedDependencies":{"diff":{"required":"^4.0.1","stable":"5.0.0","latest":"5.0.0"},"buffer":{"required":"^5.4.3","stable":"6.0.3","latest":"6.0.3"}}}},"evaluation":{"quality":{"carefulness":0.9199999999999999,"tests":0.85,"health":0.9069767441860466,"branding":0.6},"popularity":{"communityInterest":454,"downloadsCount":204988.33333333334,"downloadsAcceleration":505.8256088280059,"dependentsCount":19},"maintenance":{"releasesFrequency":0.6845890410958905,"commitsFrequency":1,"openIssues":1,"issuesDistribution":0.2431234011833901}},"score":{"final":0.6882122176467709,"detail":{"quality":0.9691691569005486,"popularity":0.24200175637773644,"maintenance":0.8936024452697102}}}