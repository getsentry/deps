{"analyzedAt":"2021-08-11T11:20:38.206Z","collected":{"metadata":{"name":"intersection-observer","scope":"unscoped","version":"0.12.0","description":"A polyfill for IntersectionObserver","keywords":["Intersection","Observer"],"date":"2020-12-10T17:44:06.813Z","author":{"name":"Philip Walton","email":"philip@philipwalton.com","url":"http://philipwalton.com","username":"philipwalton"},"publisher":{"username":"philipwalton","email":"philip@philipwalton.com"},"maintainers":[{"username":"philipwalton","email":"philip@philipwalton.com"}],"repository":{"type":"git","url":"git+ssh://git@github.com/w3c/IntersectionObserver.git"},"links":{"npm":"https://www.npmjs.com/package/intersection-observer","homepage":"https://github.com/w3c/IntersectionObserver#readme","repository":"https://github.com/w3c/IntersectionObserver","bugs":"https://github.com/w3c/IntersectionObserver/issues"},"license":"W3C-20150513","releases":[{"from":"2021-07-12T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":0},{"from":"2021-05-13T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":0},{"from":"2021-02-12T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":0},{"from":"2020-08-11T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":2},{"from":"2019-08-12T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":6}],"readme":"# `IntersectionObserver` polyfill\n\nThis library polyfills the native [`IntersectionObserver`](http://w3c.github.io/IntersectionObserver/) API in unsupporting browsers. See the [API documentation](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API) for usage information.\n\n- [Installation](#installation)\n- [Configuring the polyfill](#configuring-the-polyfill)\n- [Limitations](#limitations)\n- [Browser support](#browser-support)\n- [Running the tests](#running-the-tests)\n\n## Installation\n\nYou can install the polyfill via npm or by downloading a [zip](https://github.com/w3c/IntersectionObserver/archive/gh-pages.zip) of this repository:\n\n```sh\nnpm install intersection-observer\n```\n\n### Adding the polyfill to your site\n\nThe examples below show various ways to add the `IntersectionObserver` polyfill to your site. Be sure to include the polyfill prior to referencing it anywhere in your JavaScript code.\n\n**Using `<script>` tags in the HTML:**\n\n```html\n<!-- Load the polyfill first. -->\n<script src=\"path/to/intersection-observer.js\"></script>\n\n<!-- Load all other JavaScript. -->\n<script src=\"app.js\"></script>\n```\n\n**Using a module loader (e.g. Browserify or Webpack):**\n\n```js\n// Require the polyfill before requiring any other modules.\nrequire('intersection-observer');\n\nrequire('./foo.js');\nrequire('./bar.js');\n```\n\n## Configuring the polyfill\n\nIt's impossible to handle all possible ways a target element could intersect with a root element without resorting to constantly polling the document for intersection changes.\n\nTo avoid this extra work and performance penalty, the default configuration of the polyfill optimizes for the most common `IntersectionObserver` use cases, which primarily include target elements intersecting with a root element due to:\n\n- User scrolling.\n- Resizing the window.\n- Changes to the DOM.\n\nAll of the above can be handled without polling the DOM.\n\nThere are, however, additional use cases that the default configuration will not detect. These include target elements intersecting with a root element due to:\n\n- CSS changes on `:hover`, `:active`, or `:focus` states.\n- CSS changes due to transitions or animations with a long initial delay.\n- Resizable `<textarea>` elements that cause other elements to move around.\n- Scrolling of non-document elements in browsers that don't support the event capture phase.\n\nIf you need to handle any of these use-cases, you can configure the polyfill to poll the document by setting the `POLL_INTERVAL` property. This can be set either globally or on a per-instance basis.\n\n**Enabling polling for all instance:**\n\nTo enable polling for all instance, set a value for `POLL_INTERVAL` on the `IntersectionObserver` prototype:\n\n\n```js\nIntersectionObserver.prototype.POLL_INTERVAL = 100; // Time in milliseconds.\n```\n\n**Enabling polling for individual instance:**\n\nTo enable polling on only specific instances, set a `POLL_INTERVAL` value on the instance itself:\n\n```js\nvar io = new IntersectionObserver(callback);\nio.POLL_INTERVAL = 100; // Time in milliseconds.\nio.observe(someTargetElement);\n```\n\n**Note:** the `POLL_INTERVAL` property must be set prior to calling the `.observe` method, or the default configuration will be used.\n\n**Ignoring DOM changes**\n\nYou can also choose to not check for intersections when the DOM changes by setting an observer's `USE_MUTATION_OBSERVER` property to `false` (either globally on the prototype or per-instance)\n\n```js\nIntersectionObserver.prototype.USE_MUTATION_OBSERVER = false; // Globally\n\n// for an instance\nvar io = new IntersectionObserver(callback);\nio.USE_MUTATION_OBSERVER = false;\n```\n\nThis is recommended in cases where the DOM will update frequently but you know those updates will have no affect on the position or your target elements.\n\n\n## iframe support\n\n### Same-origin iframes\n\nSame-origin iframes are supported by the polyfill out of the box.\n\n\n### Cross-origin iframes\n\nAdditional code and configuration are required to support cross-origin iframes,\nboth on the iframe and host sides.\n\nThe setup is as following:\n\n1. The host and iframe will establish a messaging channel.\n2. The host will setup its own IntersectionObserver instance for the\ncross-origin iframe element. It can either use the this polyfill or any other\napproach. For each IntersectionObserverEntry for the iframe it will forward\nintersection data to the iframe via messaging.\n3. The iframe will load the polyfill and configure it by calling the\n`_setupCrossOriginUpdater()` method. It will call the provided callback\nwhenever it receives the intersection data from the the parent via messaging.\n\nA hypothetical host code:\n\n```javascript\nfunction forwardIntersectionToIframe(iframe) {\n  createMessagingChannel(iframe, function(port) {\n    var io = new IntersectionObserver(function() {\n      port.postMessage({\n        boundingClientRect: serialize(boundingClientRect),\n        intersectionRect: serialize(intersectionRect)\n      });\n    }, {threshold: [0, 0.1, ..., 1]});\n    io.observe(iframe);\n  });\n}\n```\n\nNotice that the host should provide a `threshold` argument for the desired\nlevel of precision. Otherwise, the iframe side may not update as frequently as\ndesired.\n\nA hypothetical iframe code:\n\n```javascript\ncreateMessagingChannel(parent, function(port) {\n  if (IntersectionObserver._setupCrossOriginUpdater) {\n    var crossOriginUpdater = IntersectionObserver._setupCrossOriginUpdater();\n    port.onmessage = function(event) {\n      crossOriginUpdater(\n        deserialize(event.data.boundingClientRect),\n        deserialize(event.data.intersectionRect)\n      );\n    };\n  }\n});\n```\n\n\n## Limitations\n\nThis polyfill does not support the [proposed v2 additions](https://github.com/szager-chromium/IntersectionObserver/blob/v2/explainer.md), as these features are not currently possible to do with JavaScript and existing web APIs.\n\n## Browser support\n\nThe polyfill has been tested and known to work in the latest version of all browsers.\n\nLegacy support is also possible in very old browsers by including a shim for ES5 as well as the `window.getComputedStyle` method. The easiest way to load the IntersectionObserver polyfill and have it work in the widest range of browsers is via [polyfill.io](https://cdn.polyfill.io/v3/), which will automatically include dependencies where necessary:\n\n```html\n<script src=\"https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver\"></script>\n```\n\nWith these polyfills, `IntersectionObserver` has been tested an known to work in the following browsers:\n\n<table>\n  <tr>\n    <td align=\"center\">\n      <img src=\"https://raw.github.com/alrra/browser-logos/39.2.2/src/chrome/chrome_48x48.png\" alt=\"Chrome\"><br>\n      笨能n    </td>\n    <td align=\"center\">\n      <img src=\"https://raw.github.com/alrra/browser-logos/39.2.2/src/firefox/firefox_48x48.png\" alt=\"Firefox\"><br>\n      笨能n    </td>\n    <td align=\"center\">\n      <img src=\"https://raw.github.com/alrra/browser-logos/39.2.2/src/safari/safari_48x48.png\" alt=\"Safari\"><br>\n      6+\n    </td>\n    <td align=\"center\">\n      <img src=\"https://raw.github.com/alrra/browser-logos/39.2.2/src/edge/edge_48x48.png\" alt=\"Edge\"><br>\n      笨能n    </td>\n    <td align=\"center\">\n      <img src=\"https://raw.github.com/alrra/browser-logos/39.2.2/src/archive/internet-explorer_7-8/internet-explorer_7-8_48x48.png\" alt=\"Internet Explorer\"><br>\n      7+\n    </td>\n    <td align=\"center\">\n      <img src=\"https://raw.github.com/alrra/browser-logos/39.2.2/src/opera/opera_48x48.png\" alt=\"Opera\"><br>\n      笨能n    </td>\n    <td align=\"center\">\n      <img src=\"https://raw.github.com/alrra/browser-logos/39.2.2/src/android/android_48x48.png\" alt=\"Android\"><br>\n      4.4+\n    </td>\n  </tr>\n</table>\n\n## Running the tests\n\nTo run the test suite for the `IntersectionObserver` polyfill, open the [`intersection-observer-test.html`](./intersection-observer-test.html) page in the browser of your choice.\n\nIf you run the tests in a browser that support `IntersectionObserver` natively, the tests will be run against the native implementation. If it doesn't the tests will be run against the polyfill."},"npm":{"downloads":[{"from":"2021-08-10T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":181042},{"from":"2021-08-04T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":898172},{"from":"2021-07-12T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":3940528},{"from":"2021-05-13T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":11817184},{"from":"2021-02-12T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":24501885},{"from":"2020-08-11T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":44706702}],"dependentsCount":554,"starsCount":9},"github":{"homepage":"https://www.w3.org/TR/intersection-observer/","starsCount":3424,"forksCount":543,"subscribersCount":133,"issues":{"count":477,"openCount":121,"distribution":{"3600":51,"10800":19,"32400":15,"97200":21,"291600":27,"874800":43,"2624400":44,"7873200":50,"23619600":50,"70858800":65,"212576400":92},"isDisabled":false},"contributors":[{"username":"triblondon","commitsCount":11},{"username":"tabatkins","commitsCount":3},{"username":"RByers","commitsCount":5},{"username":"stefanjudis","commitsCount":1},{"username":"pottedmeat","commitsCount":6},{"username":"mike-seiler","commitsCount":1},{"username":"abhishekakade","commitsCount":1},{"username":"szager-chromium","commitsCount":77},{"username":"JSteunou","commitsCount":5},{"username":"nolanlawson","commitsCount":2},{"username":"dret","commitsCount":1},{"username":"midzer","commitsCount":1},{"username":"atotic","commitsCount":1},{"username":"Johanna-hub","commitsCount":2},{"username":"dvoytenko","commitsCount":21},{"username":"saschanaz","commitsCount":1},{"username":"surma","commitsCount":17},{"username":"marcoscaceres","commitsCount":5},{"username":"martinthomson","commitsCount":1},{"username":"robinwhittleton","commitsCount":2},{"username":"robwalch","commitsCount":1},{"username":"Spone","commitsCount":1},{"username":"lozandier","commitsCount":1},{"username":"philipwalton","commitsCount":59},{"username":"web2033","commitsCount":1},{"username":"jakearchibald","commitsCount":1},{"username":"plehegar","commitsCount":2},{"username":"cpeterso","commitsCount":1},{"username":"slightlyoff","commitsCount":7},{"username":"Suiret","commitsCount":1},{"username":"siusin","commitsCount":7},{"username":"ennjin","commitsCount":1},{"username":"dholbert","commitsCount":1},{"username":"yoavweiss","commitsCount":3},{"username":"emilio","commitsCount":1},{"username":"exunreal","commitsCount":1},{"username":"ericperez","commitsCount":1},{"username":"esprehn","commitsCount":10},{"username":"Ornhoj","commitsCount":2},{"username":"mshustov","commitsCount":1},{"username":"samouri","commitsCount":10},{"username":"nostalgicdodo","commitsCount":1},{"username":"mpb","commitsCount":45},{"username":"shvaikalesh","commitsCount":6},{"username":"carlosagsmendes","commitsCount":1},{"username":"autokagami","commitsCount":2},{"username":"sillero","commitsCount":3},{"username":"ojanvafai","commitsCount":4}],"commits":[{"from":"2021-08-04T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":0},{"from":"2021-07-12T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":0},{"from":"2021-05-13T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":4},{"from":"2021-02-12T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":5},{"from":"2020-08-11T00:00:00.000Z","to":"2021-08-11T00:00:00.000Z","count":41}]},"source":{"files":{"readmeSize":8115,"testsSize":121129},"linters":["eslint"]}},"evaluation":{"quality":{"carefulness":0.42,"tests":0.3,"health":1,"branding":0},"popularity":{"communityInterest":4157,"downloadsCount":3939061.3333333335,"downloadsAcceleration":5626.071632420091,"dependentsCount":554},"maintenance":{"releasesFrequency":0.1726027397260274,"commitsFrequency":0.7024486301369862,"openIssues":0.9105520614954578,"issuesDistribution":0}},"score":{"final":0.5611594168793538,"detail":{"quality":0.6736863055529727,"popularity":0.5217069733024013,"maintenance":0.5041602415932043}}}