{"analyzedAt":"2021-08-17T03:30:39.553Z","collected":{"metadata":{"name":"u2f-api","scope":"unscoped","version":"1.2.1","description":"Promisified U2F API for browsers","keywords":["u2f","api","client","2-factor","authentication","fido","yubikey","promise"],"date":"2021-01-25T20:30:46.443Z","author":{"name":"Gustaf Räntilä","email":"g.rantila@gmail.com","username":"grantila"},"publisher":{"username":"grantila","email":"g.rantila@gmail.com"},"maintainers":[{"username":"grantila","email":"g.rantila@gmail.com"}],"repository":{"type":"git","url":"git+https://github.com/grantila/u2f-api.git"},"links":{"npm":"https://www.npmjs.com/package/u2f-api","homepage":"https://github.com/grantila/u2f-api#readme","repository":"https://github.com/grantila/u2f-api","bugs":"https://github.com/grantila/u2f-api/issues"},"license":"MIT","devDependencies":{"@types/jest":"^26.0.13","@types/node":"^14.6.4","already":"1.13.1","commitizen":"4.2.1","cz-conventional-changelog":"3.3.0","get-stream":"^6.0.0","jest":"^26.4.2","jsdom":"16.4.0","pre-commit":"1.x","rimraf":"3.0.2","rollup":"^2.26.10","ts-jest":"^26.3.0","ts-node":"^9.0.0","typescript":"4.0.2","u2f":"^0.1.3"},"releases":[{"from":"2021-07-18T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":0},{"from":"2021-05-19T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":0},{"from":"2021-02-18T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":0},{"from":"2020-08-17T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":3},{"from":"2019-08-18T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":3}],"hasTestScript":true,"hasSelectiveFiles":true,"readme":"[![npm version][npm-image]][npm-url]\n[![downloads][downloads-image]][npm-url]\n[![build status][build-image]][build-url]\n\n# u2f-api\n\nU2F API for browsers\n\n## History\n\n- 1.1.0\n    - Can be used [without bundler](#using-without-bundler)\n- 1.0.0\n\t- Support for custom promise libraries removed\n\t- Promises no longer cancellable\n\n## API\n\n### Support\n\nU2F has for a long time been supported in Chrome, although not with the standard `window.u2f` methods, but through a built-in extension. Nowadays, browsers seem to use `window.u2f` to expose the functionality.\n\nSupported browsers are:\n  * Chrome, using Chrome-specific hacks\n  * Opera, using Chrome-specific hacks\n  * Firefox 58+, although not proper support for facets\n    * *multi-domain registrations will work differently from Chrome*\n\nSafari and other browsers still lack U2F support.\n\nSince 0.1.0, this library supports the standard `window.u2f` methods.\n\nThe library should be complemented with server-side functionality, e.g. using the [`u2f`](https://www.npmjs.com/package/u2f) package.\n\n### Basics\n\n`u2f-api` exports two main functions and an error \"enum\". The main functions are `register()` and `sign()`, although since U2F isn't widely supported, the functions `isSupported()` as well as `ensureSupport()` helps you build applications which can use U2F only when the client supports it.\n\n\n#### Check or ensure support\n\n```ts\nimport { isSupported } from 'u2f-api'\n\nisSupported(): Promise< Boolean > // Doesn't throw/reject\n```\n\n```ts\nimport { ensureSupport } from 'u2f-api'\n\nensureSupport(): Promise< void > // Throws/rejects if not supported\n```\n\n#### Register\n\n```ts\nimport { register } from 'u2f-api'\n\nregister(\n  registerRequests: RegisterRequest[],\n  signRequests: SignRequest[], // optional\n  timeout: number // optional\n): Promise< RegisterResponse >\n```\n\nThe `registerRequests` can be either a RegisterRequest or an array of such. The optional `signRequests` must be, unless ignored, an array of SignRequests. The optional `timeout` is in seconds, and will default to an implementation specific value, e.g. 30.\n\n#### Sign\n\n```ts\nimport { sign } from 'u2f-api'\n\nsign(\n  signRequests: SignRequest[],\n  timeout: number // optional\n): Promise< SignResponse >\n```\n\nThe values and interpretation of the arguments are the same as with `register( )`.\n\n#### Errors\n\n`register()` and `sign()` can return rejected promises. The rejection error is an `Error` object with a `metaData` property containing `code` and `type`. The `code` is a numerical value describing the type of the error, and `type` is the name of the error, as defined by the `ErrorCodes` enum in the \"FIDO U2F Javascript API\" specification. They are:\n\n```js\nOK = 0 // u2f-api will never throw errors with this code\nOTHER_ERROR = 1\nBAD_REQUEST = 2\nCONFIGURATION_UNSUPPORTED = 3\nDEVICE_INELIGIBLE = 4\nTIMEOUT = 5\n```\n\n## Usage\n\n### Loading the library\n\nThe library is promisified and will use the built-in native promises of the browser, ~~unless another promise library is injected~~ (deprecated since 1.0).\n\n```js\nvar u2fApi = require( 'u2f-api' ); // CommonJS\n```\n\n```js\nimport u2fApi from 'u2f-api' // ES modules\n```\n\n#### Using without bundler\n\n`u2f-api` can be used without a bundler (like Webpack). Just include:\n\n```html\n<head><script src=\"https://cdn.jsdelivr.net/npm/u2f-api@latest/bundle.js\"></script></head>\n```\n\nThe functionality will be in the `window.u2fApi` object.\n\n\n### Registering a passkey\n\nWith `registerRequestsFromServer` somehow received from the server, the client code becomes:\n\n```js\nu2fApi.register( registerRequestsFromServer )\n.then( sendRegisterResponseToServer )\n.catch( ... );\n```\n\n### Signing a passkey\n\nWith `signRequestsFromServer` also received from the server somehow:\n\n```js\nu2fApi.sign( signRequestsFromServer )\n.then( sendSignResponseToServer )\n.catch( ... );\n```\n\n### Example with checks for client support\n\n```js\nu2fApi.isSupported( )\n.then( function( supported ) {\n\tif ( supported )\n\t{\n\t\treturn u2fApi.sign( signRequestsFromServer )\n\t\t.then( sendSignResponseToServer );\n\t}\n\telse\n\t{\n\t\t... // Other authentication method\n\t}\n} )\n.catch( ... );\n```\n\n\n## Example implementation\n\nU2F is a *challenge-response protocol*. The server sends a `challenge` to the client, which responds with a `response`.\n\nThis library is intended to be used in the client (the browser). There is another package intended for server-side: https://www.npmjs.com/package/u2f\n\n## Common problems\n\nIf you get `BAD_REQUEST`, the most common situations are that you either don't use `https` (which you must), or that the AppID doesn't match the server URI. In fact, the AppID must be exactly the base URI to your server (such as `https://your-server.com`), including the port if it isn't 443.\n\nFor more information, please see https://developers.yubico.com/U2F/Libraries/Client_error_codes.html and https://developers.yubico.com/U2F/App_ID.html\n\n[npm-image]: https://img.shields.io/npm/v/u2f-api.svg\n[npm-url]: https://npmjs.org/package/u2f-api\n[downloads-image]: https://img.shields.io/npm/dm/u2f-api.svg\n[build-image]: https://img.shields.io/github/workflow/status/grantila/u2f-api/Master.svg\n[build-url]: https://github.com/grantila/u2f-api/actions?query=workflow%3AMaster"},"npm":{"downloads":[{"from":"2021-08-16T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":0},{"from":"2021-08-10T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":24937},{"from":"2021-07-18T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":137389},{"from":"2021-05-19T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":468253},{"from":"2021-02-18T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":841182},{"from":"2020-08-17T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":1415462}],"dependentsCount":15,"starsCount":1},"github":{"starsCount":81,"forksCount":35,"subscribersCount":5,"issues":{"count":30,"openCount":6,"distribution":{"3600":2,"10800":1,"32400":1,"97200":0,"291600":6,"874800":0,"2624400":3,"7873200":2,"23619600":9,"70858800":6,"212576400":0},"isDisabled":false},"contributors":[{"username":"grantila","commitsCount":92},{"username":"joswhite","commitsCount":1},{"username":"dtcpatricio","commitsCount":1},{"username":"icewind1991","commitsCount":1},{"username":"thgreasi","commitsCount":3}],"commits":[{"from":"2021-08-10T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":0},{"from":"2021-07-18T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":0},{"from":"2021-05-19T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":0},{"from":"2021-02-18T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":0},{"from":"2020-08-17T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":9}]},"source":{"files":{"readmeSize":5207,"testsSize":5485,"hasNpmIgnore":true},"badges":[{"urls":{"original":"https://img.shields.io/npm/v/u2f-api.svg","shields":"https://img.shields.io/npm/v/u2f-api.svg","content":"https://img.shields.io/npm/v/u2f-api.json"},"info":{"service":"npm","type":"version","modifiers":{"type":"v"}}},{"urls":{"original":"https://img.shields.io/npm/dm/u2f-api.svg","shields":"https://img.shields.io/npm/dm/u2f-api.svg","content":"https://img.shields.io/npm/dm/u2f-api.json"},"info":{"service":"npm","type":"downloads","modifiers":{"type":"dm"}}}]}},"evaluation":{"quality":{"carefulness":0.7899999999999999,"tests":0.6,"health":1,"branding":0.3},"popularity":{"communityInterest":127,"downloadsCount":156084.33333333334,"downloadsAcceleration":374.22762557077635,"dependentsCount":15},"maintenance":{"releasesFrequency":0.9,"commitsFrequency":0.9,"openIssues":1,"issuesDistribution":0.9}},"score":{"final":0.6938484013002547,"detail":{"quality":0.9131626811424349,"popularity":0.1998186028582722,"maintenance":0.999894531306083}}}