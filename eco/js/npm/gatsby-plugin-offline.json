{"analyzedAt":"2021-08-31T22:01:47.173Z","collected":{"metadata":{"name":"gatsby-plugin-offline","scope":"unscoped","version":"4.13.0","description":"Gatsby plugin which sets up a site to be able to run offline","keywords":["gatsby","gatsby-plugin","offline","precache","service-worker"],"date":"2021-08-31T18:15:52.079Z","author":{"name":"Kyle Mathews","email":"mathews.kyle@gmail.com","username":"kylemathews"},"publisher":{"username":"vladar","email":"vladimir.razuvaev@gmail.com"},"maintainers":[{"username":"dschau","email":"dustinschau@gmail.com"},{"username":"jamo","email":"jamo@isotalo.fi"},{"username":"kylemathews","email":"mathews.kyle@gmail.com"},{"username":"pieh","email":"misiek.piechowiak@gmail.com"},{"username":"sidharthachatterjee","email":"me@sidharthachatterjee.com"},{"username":"wardpeet","email":"ward@coding-tech.com"},{"username":"vladar","email":"vladimir.razuvaev@gmail.com"},{"username":"tylerbarnes","email":"tyler@known.design"},{"username":"fk","email":"sechskilo@gmail.com"},{"username":"smthomas","email":"shane@codekarate.com"},{"username":"lekoarts","email":"lekoarts@gmail.com"},{"username":"rachelbahl","email":"rachel@gatsbyjs.com"},{"username":"daniellewgatsby","email":"daniel.lew@gatsbyjs.com"},{"username":"veryspry","email":"ehlinger.matt@gmail.com"},{"username":"abhiaiyer","email":"abhiaiyer91+npm@gmail.com"},{"username":"freiksenet","email":"freiksenet@gmail.com"},{"username":"monastic.panic","email":"monastic.panic@gmail.com"},{"username":"m-allanson","email":"michael.allanson@gmail.com"},{"username":"moocar","email":"anthony@moocar.me"}],"repository":{"type":"git","url":"git+https://github.com/gatsbyjs/gatsby.git","directory":"packages/gatsby-plugin-offline"},"links":{"npm":"https://www.npmjs.com/package/gatsby-plugin-offline","homepage":"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-offline#readme","repository":"https://github.com/gatsbyjs/gatsby","bugs":"https://github.com/gatsbyjs/gatsby/issues"},"license":"MIT","dependencies":{"@babel/runtime":"^7.14.8","cheerio":"^1.0.0-rc.9","gatsby-core-utils":"^2.13.0","glob":"^7.1.7","idb-keyval":"^3.2.0","lodash":"^4.17.21","workbox-build":"^4.3.1"},"devDependencies":{"@babel/cli":"^7.14.8","@babel/core":"^7.14.8","babel-preset-gatsby-package":"^1.13.0","cpx":"^1.5.0","cross-env":"^7.0.3","gatsby-plugin-utils":"^1.13.0","rewire":"^5.0.0"},"peerDependencies":{"gatsby":"^3.0.0-next.0","react":"^16.9.0 || ^17.0.0","react-dom":"^16.9.0 || ^17.0.0"},"releases":[{"from":"2021-08-01T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":17},{"from":"2021-06-02T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":34},{"from":"2021-03-04T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":58},{"from":"2020-08-31T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":107},{"from":"2019-09-01T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":189}],"readme":"# gatsby-plugin-offline\n\nAdds drop-in support for making a Gatsby site work offline and more resistant to\nbad network connections. It uses [Workbox Build](https://developers.google.com/web/tools/workbox/modules/workbox-build)\nto create a service worker for the site and loads the service worker into the client.\n\nIf you're using this plugin with `gatsby-plugin-manifest` (recommended) this\nplugin should be listed _after_ that plugin so the manifest file can be included\nin the service worker.\n\n## Install\n\n`npm install gatsby-plugin-offline`\n\n## How to use\n\n```javascript\n// In your gatsby-config.js\nplugins: [`gatsby-plugin-offline`]\n```\n\n## Available options\n\nIn `gatsby-plugin-offline` 3.x, the following options are available:\n\n- `precachePages` lets you specify pages whose resources should be precached by the service worker, using an array of globs. For example:\n\n  ```javascript:title=gatsby-config.js\n  plugins: [\n    {\n      resolve: `gatsby-plugin-offline`,\n      options: {\n        precachePages: [`/about-us/`, `/projects/*`],\n      },\n    },\n  ]\n  ```\n\n  Note: while essential resources of specified pages will be precached, such as JavaScript and CSS, non-essential resources such as fonts and images will not be included. Instead, these will be cached at runtime when a user visits a given page that includes these resources.\n\n- `appendScript` lets you specify a file to be appended at the end of the generated service worker (`sw.js`). For example:\n\n  ```javascript:title=gatsby-config.js\n  plugins: [\n    {\n      resolve: `gatsby-plugin-offline`,\n      options: {\n        appendScript: require.resolve(`src/custom-sw-code.js`),\n      },\n    },\n  ]\n  ```\n\n  <br />\n\n  ```javascript:title=src/custom-sw-code.js\n  // show a notification after 15 seconds (the notification\n  // permission must be granted first)\n  setTimeout(() => {\n    self.registration.showNotification(\"Hello, world!\")\n  }, 15000)\n\n  // register a custom navigation route\n  const customRoute = new workbox.routing.NavigationRoute(({ event }) => {\n    // ...\n  })\n  workbox.routing.registerRoute(customRoute)\n  ```\n\n- `debug` specifies whether Workbox should show debugging output in the browser console at runtime. When undefined, defaults to showing debug messages on `localhost` only.\n\n- `workboxConfig` allows you to override the default Workbox options - see [Overriding Workbox configuration](#overriding-workbox-configuration). For example:\n\n  ```javascript:title=gatsby-config.js\n  plugins: [\n    {\n      resolve: `gatsby-plugin-offline`,\n      options: {\n        workboxConfig: {\n          importWorkboxFrom: `cdn`,\n        },\n      },\n    },\n  ]\n  ```\n\n## Upgrading from 2.x\n\nTo upgrade from 2.x to 3.x, move any existing options into the `workboxConfig` option. If you haven't specified any options, you have nothing to do.\n\nFor example, here is a 2.x config:\n\n```javascript\nplugins: [\n  {\n    resolve: `gatsby-plugin-offline`,\n    options: {\n      importWorkboxFrom: `cdn`,\n    },\n  },\n]\n```\n\nHere is the equivalent 3.x config:\n\n```javascript\nplugins: [\n  {\n    resolve: `gatsby-plugin-offline`,\n    options: {\n      workboxConfig: {\n        importWorkboxFrom: `cdn`,\n      },\n    },\n  },\n]\n```\n\nIn version 3, Workbox is also upgraded to version 4 so you may need to update your `workboxConfig` if any of those changes apply to you. Please see the [docs on Google Developers](https://developers.google.com/web/tools/workbox/guides/migrations/migrate-from-v3) for more information.\n\n## Overriding Workbox configuration\n\nWhen adding this plugin to your `gatsby-config.js`, you can use the option `workboxConfig` to override the default Workbox config. To see the full list of options, see [this article on Google Developers](https://developers.google.com/web/tools/workbox/modules/workbox-build#full_generatesw_config).\n\nThe default `workboxConfig` is as follows. Note that some of these options are configured automatically, e.g. `globPatterns`. If you're not sure about what all of these options mean, it's best to leave them as-is - otherwise, you may end up causing errors on your site, causing old files to be remain cached, or even breaking offline support.\n\n```javascript\nconst options = {\n  importWorkboxFrom: `local`,\n  globDirectory: rootDir,\n  globPatterns,\n  modifyURLPrefix: {\n    // If `pathPrefix` is configured by user, we should replace\n    // the default prefix with `pathPrefix`.\n    \"/\": `${pathPrefix}/`,\n  },\n  cacheId: `gatsby-plugin-offline`,\n  // Don't cache-bust JS or CSS files, and anything in the static directory,\n  // since these files have unique URLs and their contents will never change\n  dontCacheBustURLsMatching: /(\\.js$|\\.css$|static\\/)/,\n  runtimeCaching: [\n    {\n      // Use cacheFirst since these don't need to be revalidated (same RegExp\n      // and same reason as above)\n      urlPattern: /(\\.js$|\\.css$|static\\/)/,\n      handler: `CacheFirst`,\n    },\n    {\n      // page-data.json files, static query results and app-data.json\n      // are not content hashed\n      urlPattern: /^https?:.*\\/page-data\\/.*\\.json/,\n      handler: `StaleWhileRevalidate`,\n    },\n    {\n      // Add runtime caching of various other page resources\n      urlPattern:\n        /^https?:.*\\.(png|jpg|jpeg|webp|svg|gif|tiff|js|woff|woff2|json|css)$/,\n      handler: `StaleWhileRevalidate`,\n    },\n    {\n      // Google Fonts CSS (doesn't end in .css so we need to specify it)\n      urlPattern: /^https?:\\/\\/fonts\\.googleapis\\.com\\/css/,\n      handler: `StaleWhileRevalidate`,\n    },\n  ],\n  skipWaiting: true,\n  clientsClaim: true,\n}\n```\n\n## Remove\n\nIf you want to remove `gatsby-plugin-offline` from your site at a later point,\nsubstitute it with [`gatsby-plugin-remove-serviceworker`](https://www.npmjs.com/package/gatsby-plugin-remove-serviceworker)\nto safely remove the service worker. First, install the new package:\n\n```shell\nnpm install gatsby-plugin-remove-serviceworker\nnpm uninstall gatsby-plugin-offline\n```\n\nThen, update your `gatsby-config.js`:\n\n```diff:title=gatsby-config.js\n plugins: [\n-  `gatsby-plugin-offline`,\n+  `gatsby-plugin-remove-serviceworker`,\n ]\n```\n\nThis will ensure that the worker is properly unregistered, instead of leaving an\noutdated version registered in users' browsers.\n\n## Notes\n\n### Empty View Source and SEO\n\nGatsby offers great SEO capabilities and that is no different with `gatsby-plugin-offline`. However, you shouldn't think that Gatsby doesn't serve HTML tags anymore when looking at your source code in the browser (with `Right click` => `View source`). `View source` doesn't represent the actual HTML data since `gatsby-plugin-offline` registers and loads a service worker that will cache and handle this differently. Your site is loaded from the service worker, not from its actual source (check your `Network` tab in the DevTools for that).\n\nTo see the HTML data that crawlers will receive, run this in your terminal:\n\n**on Windows (using powershell):**\n\n```shell\nInvoke-WebRequest https://www.yourdomain.tld | Select -ExpandProperty Content\n```\n\n**on Mac OS/Linux:**\n\n```shell\ncurl https://www.yourdomain.tld\n```\n\nAlternatively you can have a look at the `/public/index.html` file in your project folder.\n\n### App shell and server logs\n\nServer logs (like from [Netlify analytics](https://www.netlify.com/products/analytics/)) may show a large number of pageviews to a route like `/offline-plugin-app-shell-fallback/index.html`, this is a result of `gatsby-plugin-offline` adding an [app shell](https://developers.google.com/web/fundamentals/architecture/app-shell) to the page. The app shell is a minimal amount of user interface that can be cached offline for reliable performance loading on repeat visits. The shell can be loaded from the cache, and the content of the site loaded into the shell by the service worker.\n\n### Using with gatsby-plugin-manifest\n\nIf using this plugin with `gatsby-plugin-manifest` you may find that your icons are not cached.\nIn order to solve this, update your `gatsby-config.js` as follows:\n\n```js\n// gatsby-config.js\n{\n   resolve: 'gatsby-plugin-manifest',\n   options: {\n      icon: 'icon.svg',\n      cache_busting_mode: 'none'\n   }\n},\n{\n   resolve: 'gatsby-plugin-offline',\n   options: {\n      workboxConfig: {\n         globPatterns: ['**/icon-path*']\n      }\n   }\n}\n```\n\nUpdating `cache_busting_mode` is necessary. Otherwise, workbox will break while attempting to find the cached URLs.\nAdding the `globPatterns` makes sure that the offline plugin will cache everything.\nNote that you have to prefix your icon with `icon-path` or whatever you may call it"},"npm":{"downloads":[{"from":"2021-08-30T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":25690},{"from":"2021-08-24T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":128265},{"from":"2021-08-01T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":642389},{"from":"2021-06-02T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":2093868},{"from":"2021-03-04T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":4535909},{"from":"2020-08-31T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":9651342}],"dependentsCount":319,"starsCount":1},"github":{"homepage":"https://www.gatsbyjs.com","starsCount":51195,"forksCount":9856,"subscribersCount":880,"issues":{"count":31487,"openCount":417,"distribution":{"3600":4955,"10800":2794,"32400":2869,"97200":4590,"291600":4059,"874800":3494,"2624400":2651,"7873200":3050,"23619600":2029,"70858800":956,"212576400":40},"isDisabled":false},"contributors":[{"username":"axe312ger","commitsCount":64},{"username":"nihgwu","commitsCount":30},{"username":"ascorbic","commitsCount":240},{"username":"devrchancay","commitsCount":13},{"username":"ThomasWang","commitsCount":17},{"username":"abhiaiyer91","commitsCount":13},{"username":"caitlinthefirst","commitsCount":16},{"username":"davidbailey00","commitsCount":67},{"username":"resir014","commitsCount":17},{"username":"hashimwarren","commitsCount":51},{"username":"shannonbux","commitsCount":268},{"username":"amberleyromo","commitsCount":112},{"username":"Khaledgarbaya","commitsCount":27},{"username":"jbolda","commitsCount":22},{"username":"Simply007","commitsCount":14},{"username":"ooloth","commitsCount":18},{"username":"fabien0102","commitsCount":13},{"username":"polarathene","commitsCount":12},{"username":"arcanis","commitsCount":23},{"username":"tesseralis","commitsCount":158},{"username":"me4502","commitsCount":16},{"username":"renovate[bot]","commitsCount":116},{"username":"daydream05","commitsCount":16},{"username":"smthomas","commitsCount":12},{"username":"Slashgear","commitsCount":17},{"username":"scottyeck","commitsCount":20},{"username":"KyleAMathews","commitsCount":2980},{"username":"LekoArts","commitsCount":379},{"username":"ChangoMan","commitsCount":12},{"username":"0x80","commitsCount":32},{"username":"coreyward","commitsCount":13},{"username":"sasurau4","commitsCount":12},{"username":"TylerBarnes","commitsCount":67},{"username":"greglobinski","commitsCount":21},{"username":"alexandernanberg","commitsCount":25},{"username":"erquhart","commitsCount":19},{"username":"jbampton","commitsCount":76},{"username":"oorestisime","commitsCount":26},{"username":"duffn","commitsCount":23},{"username":"fk","commitsCount":217},{"username":"kawamataryo","commitsCount":13},{"username":"jamo","commitsCount":56},{"username":"johno","commitsCount":75},{"username":"Ekwuno","commitsCount":22},{"username":"lannonbr","commitsCount":89},{"username":"herecydev","commitsCount":23},{"username":"jquense","commitsCount":110},{"username":"wardpeet","commitsCount":444},{"username":"muescha","commitsCount":301},{"username":"cassiebeckley","commitsCount":16},{"username":"webinista","commitsCount":23},{"username":"dandv","commitsCount":21},{"username":"vladar","commitsCount":235},{"username":"meganesu","commitsCount":38},{"username":"jlengstorf","commitsCount":47},{"username":"laurieontech","commitsCount":150},{"username":"madalynrose","commitsCount":16},{"username":"docwhat","commitsCount":14},{"username":"Moocar","commitsCount":51},{"username":"benjaminhoffman","commitsCount":14},{"username":"sebastienfi","commitsCount":35},{"username":"mottox2","commitsCount":64},{"username":"mathieudutour","commitsCount":13},{"username":"mgienow","commitsCount":84},{"username":"dennari","commitsCount":12},{"username":"ChristopherBiscardi","commitsCount":186},{"username":"stefanprobst","commitsCount":138},{"username":"pieh","commitsCount":842},{"username":"mxstbr","commitsCount":96},{"username":"DanielSLew","commitsCount":20},{"username":"gillkyle","commitsCount":107},{"username":"calcsam","commitsCount":133},{"username":"pvdz","commitsCount":240},{"username":"janosh","commitsCount":22},{"username":"m-allanson","commitsCount":354},{"username":"kripod","commitsCount":15},{"username":"ehowey","commitsCount":16},{"username":"CanRau","commitsCount":18},{"username":"elrumordelaluz","commitsCount":13},{"username":"ollelauribostrom","commitsCount":13},{"username":"benstepp","commitsCount":27},{"username":"iamtraction","commitsCount":9},{"username":"DSchau","commitsCount":354},{"username":"NickyMeuleman","commitsCount":14},{"username":"szimek","commitsCount":12},{"username":"blainekasten","commitsCount":95},{"username":"gesposito","commitsCount":13},{"username":"moonmeister","commitsCount":27},{"username":"sidharthachatterjee","commitsCount":433},{"username":"tsriram","commitsCount":29},{"username":"abhishekjakhar","commitsCount":33},{"username":"hoobdeebla","commitsCount":23},{"username":"marcysutton","commitsCount":24},{"username":"freiksenet","commitsCount":119},{"username":"kkemple","commitsCount":26},{"username":"anubhavsrivastava","commitsCount":16},{"username":"avigoldman","commitsCount":31},{"username":"MichaelDeBoey","commitsCount":24},{"username":"phacks","commitsCount":13},{"username":"Js-Brecht","commitsCount":17}],"commits":[{"from":"2021-08-24T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":15},{"from":"2021-08-01T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":205},{"from":"2021-06-02T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":489},{"from":"2021-03-04T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":999},{"from":"2020-08-31T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":2398}]},"source":{"files":{"readmeSize":8554,"testsSize":71251,"hasNpmIgnore":true,"hasChangelog":true},"badges":[{"urls":{"original":"https://circleci.com/gh/gatsbyjs/gatsby.svg?style=shield","service":"https://circleci.com/gh/gatsbyjs/gatsby.svg","shields":"https://img.shields.io/circleci/project/github/gatsbyjs/gatsby.svg","content":"https://img.shields.io/circleci/project/github/gatsbyjs/gatsby.json"},"info":{"service":"circleci","type":"build"}},{"urls":{"original":"https://img.shields.io/npm/v/gatsby.svg","shields":"https://img.shields.io/npm/v/gatsby.svg","content":"https://img.shields.io/npm/v/gatsby.json"},"info":{"service":"npm","type":"version","modifiers":{"type":"v"}}},{"urls":{"original":"https://img.shields.io/npm/dm/gatsby.svg","shields":"https://img.shields.io/npm/dm/gatsby.svg","content":"https://img.shields.io/npm/dm/gatsby.json"},"info":{"service":"npm","type":"downloads","modifiers":{"type":"dm"}}},{"urls":{"original":"https://img.shields.io/npm/dt/gatsby.svg","shields":"https://img.shields.io/npm/dt/gatsby.svg","content":"https://img.shields.io/npm/dt/gatsby.json"},"info":{"service":"npm","type":"downloads","modifiers":{"type":"dt"}}}],"linters":["editorconfig","eslint","prettier"],"outdatedDependencies":{"idb-keyval":{"required":"^3.2.0","stable":"5.1.3","latest":"5.1.3"},"workbox-build":{"required":"^4.3.1","stable":"6.2.4","latest":"6.2.4"}}}},"evaluation":{"quality":{"carefulness":0.9999999999999999,"tests":0.3,"health":0.5,"branding":0.6},"popularity":{"communityInterest":62032,"downloadsCount":697956,"downloadsAcceleration":-1567.9011605783862,"dependentsCount":319},"maintenance":{"releasesFrequency":1,"commitsFrequency":1,"openIssues":1,"issuesDistribution":0.8104446354561292}},"score":{"final":0.7659869046727019,"detail":{"quality":0.8226062355266751,"popularity":0.4838087855053807,"maintenance":0.9996341688223318}}}