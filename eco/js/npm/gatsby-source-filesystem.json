{"analyzedAt":"2021-08-31T21:56:52.635Z","collected":{"metadata":{"name":"gatsby-source-filesystem","scope":"unscoped","version":"3.13.0","description":"Gatsby source plugin for building websites from local data. Markdown, JSON, images, YAML, CSV, and dozens of other data types supported.","keywords":["gatsby","gatsby-plugin"],"date":"2021-08-31T18:15:52.488Z","author":{"name":"Kyle Mathews","email":"mathews.kyle@gmail.com","username":"kylemathews"},"publisher":{"username":"vladar","email":"vladimir.razuvaev@gmail.com"},"maintainers":[{"username":"dschau","email":"dustinschau@gmail.com"},{"username":"jamo","email":"jamo@isotalo.fi"},{"username":"kylemathews","email":"mathews.kyle@gmail.com"},{"username":"pieh","email":"misiek.piechowiak@gmail.com"},{"username":"sidharthachatterjee","email":"me@sidharthachatterjee.com"},{"username":"wardpeet","email":"ward@coding-tech.com"},{"username":"vladar","email":"vladimir.razuvaev@gmail.com"},{"username":"tylerbarnes","email":"tyler@known.design"},{"username":"fk","email":"sechskilo@gmail.com"},{"username":"smthomas","email":"shane@codekarate.com"},{"username":"lekoarts","email":"lekoarts@gmail.com"},{"username":"rachelbahl","email":"rachel@gatsbyjs.com"},{"username":"daniellewgatsby","email":"daniel.lew@gatsbyjs.com"},{"username":"veryspry","email":"ehlinger.matt@gmail.com"},{"username":"abhiaiyer","email":"abhiaiyer91+npm@gmail.com"}],"repository":{"type":"git","url":"git+https://github.com/gatsbyjs/gatsby.git","directory":"packages/gatsby-source-filesystem"},"links":{"npm":"https://www.npmjs.com/package/gatsby-source-filesystem","homepage":"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-source-filesystem#readme","repository":"https://github.com/gatsbyjs/gatsby","bugs":"https://github.com/gatsbyjs/gatsby/issues"},"license":"MIT","dependencies":{"@babel/runtime":"^7.14.8","better-queue":"^3.8.10","chokidar":"^3.4.3","file-type":"^16.0.0","fs-extra":"^8.1.0","gatsby-core-utils":"^2.13.0","got":"^9.6.0","md5-file":"^5.0.0","mime":"^2.5.2","pretty-bytes":"^5.4.1","progress":"^2.0.3","valid-url":"^1.0.9","xstate":"^4.14.0"},"devDependencies":{"@babel/cli":"^7.14.8","@babel/core":"^7.14.8","babel-preset-gatsby-package":"^1.13.0","cross-env":"^7.0.3","msw":"^0.33.2"},"peerDependencies":{"gatsby":"^3.0.0-next.0"},"releases":[{"from":"2021-08-01T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":17},{"from":"2021-06-02T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":33},{"from":"2021-03-04T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":51},{"from":"2020-08-31T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":102},{"from":"2019-09-01T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":182}],"readme":"# gatsby-source-filesystem\n\nA Gatsby source plugin for sourcing data into your Gatsby application\nfrom your local filesystem.\n\nThe plugin creates `File` nodes from files. The various \"transformer\"\nplugins can transform `File` nodes into various other types of data e.g.\n`gatsby-transformer-json` transforms JSON files into JSON data nodes and\n`gatsby-transformer-remark` transforms markdown files into `MarkdownRemark`\nnodes from which you can query an HTML representation of the markdown.\n\n## Install\n\n`npm install gatsby-source-filesystem`\n\n## How to use\n\n```javascript\n// In your gatsby-config.js\nmodule.exports = {\n  plugins: [\n    // You can have multiple instances of this plugin\n    // to read source nodes from different locations on your\n    // filesystem.\n    //\n    // The following sets up the Jekyll pattern of having a\n    // \"pages\" directory for Markdown files and a \"data\" directory\n    // for `.json`, `.yaml`, `.csv`.\n    {\n      resolve: `gatsby-source-filesystem`,\n      options: {\n        name: `pages`,\n        path: `${__dirname}/src/pages/`,\n      },\n    },\n    {\n      resolve: `gatsby-source-filesystem`,\n      options: {\n        name: `data`,\n        path: `${__dirname}/src/data/`,\n        ignore: [`**/\\.*`], // ignore files starting with a dot\n      },\n    },\n  ],\n}\n```\n\n## Options\n\nIn addition to the name and path parameters you may pass an optional `ignore` array of file globs to ignore.\n\nThey will be added to the following default list:\n\n```text\n**/*.un~\n**/.DS_Store\n**/.gitignore\n**/.npmignore\n**/.babelrc\n**/yarn.lock\n**/node_modules\n../**/dist/**\n```\n\nTo prevent concurrent requests overload of `processRemoteNode`, you can adjust the `200` default concurrent downloads, with `GATSBY_CONCURRENT_DOWNLOAD` environment variable.\n\n## How to query\n\nYou can query file nodes like the following:\n\n```graphql\n{\n  allFile {\n    edges {\n      node {\n        extension\n        dir\n        modifiedTime\n      }\n    }\n  }\n}\n```\n\nTo filter by the `name` you specified in the config, use `sourceInstanceName`:\n\n```graphql\n{\n  allFile(filter: { sourceInstanceName: { eq: \"data\" } }) {\n    edges {\n      node {\n        extension\n        dir\n        modifiedTime\n      }\n    }\n  }\n}\n```\n\n## Helper functions\n\n`gatsby-source-filesystem` exports three helper functions:\n\n- `createFilePath`\n- `createRemoteFileNode`\n- `createFileNodeFromBuffer`\n\n### createFilePath\n\nWhen building pages from files, you often want to create a URL from a file's path on the file system. E.g. if you have a markdown file at `src/content/2018-01-23-an-exploration-of-the-nature-of-reality/index.md`, you might want to turn that into a page on your site at `example.com/2018-01-23-an-exploration-of-the-nature-of-reality/`. `createFilePath` is a helper function to make this task easier.\n\n```javascript\ncreateFilePath({\n  // The node you'd like to convert to a path\n  // e.g. from a markdown, JSON, YAML file, etc\n  node,\n  // Method used to get a node\n  // The parameter from `onCreateNode` should be passed in here\n  getNode,\n  // The base path for your files.\n  // It is relative to the `options.path` setting in the `gatsby-source-filesystem` entries of your `gatsby-config.js`.\n  // Defaults to `src/pages`. For the example above, you'd use `src/content`.\n  basePath,\n  // Whether you want your file paths to contain a trailing `/` slash\n  // Defaults to true\n  trailingSlash,\n})\n```\n\n#### Example usage\n\nThe following is taken from [Gatsby Tutorial, Part Seven](https://www.gatsbyjs.org/tutorial/part-seven/) and is used to create URL slugs for markdown pages.\n\n```javascript\nconst { createFilePath } = require(`gatsby-source-filesystem`)\n\nexports.onCreateNode = ({ node, getNode, actions }) => {\n  const { createNodeField } = actions\n  // Ensures we are processing only markdown files\n  if (node.internal.type === \"MarkdownRemark\") {\n    // Use `createFilePath` to turn markdown files in our `data/faqs` directory into `/faqs/slug`\n    const relativeFilePath = createFilePath({\n      node,\n      getNode,\n      basePath: \"data/faqs/\",\n    })\n\n    // Creates new query'able field with name of 'slug'\n    createNodeField({\n      node,\n      name: \"slug\",\n      value: `/faqs${relativeFilePath}`,\n    })\n  }\n}\n```\n\n### createRemoteFileNode\n\nWhen building source plugins for remote data sources such as headless CMSs, their data will often link to files stored remotely that are often convenient to download so you can work with them locally.\n\nThe `createRemoteFileNode` helper makes it easy to download remote files and add them to your site's GraphQL schema.\n\n```javascript\ncreateRemoteFileNode({\n  // The source url of the remote file\n  url: `https://example.com/a-file.jpg`,\n\n  // The id of the parent node (i.e. the node to which the new remote File node will be linked to.\n  parentNodeId,\n\n  // Gatsby's cache which the helper uses to check if the file has been downloaded already. It's passed to all Node APIs.\n  getCache,\n\n  // The action used to create nodes\n  createNode,\n\n  // A helper function for creating node Ids\n  createNodeId,\n\n  // OPTIONAL\n  // Adds htaccess authentication to the download request if passed in.\n  auth: { htaccess_user: `USER`, htaccess_pass: `PASSWORD` },\n\n  // OPTIONAL\n  // Adds extra http headers to download request if passed in.\n  httpHeaders: { Authorization: `Bearer someAccessToken` },\n\n  // OPTIONAL\n  // Sets the file extension\n  ext: \".jpg\",\n})\n```\n\n#### Example usage\n\nThe following example is pulled from [gatsby-source-wordpress](https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-source-wordpress). Downloaded files are created as `File` nodes and then linked to the WordPress Media node, so it can be queried both as a regular `File` node and from the `localFile` field in the Media node.\n\n```javascript\nconst { createRemoteFileNode } = require(`gatsby-source-filesystem`)\n\nexports.downloadMediaFiles = ({\n  nodes,\n  getCache,\n  createNode,\n  createNodeId,\n  _auth,\n}) => {\n  nodes.map(async node => {\n    let fileNode\n    // Ensures we are only processing Media Files\n    // `wordpress__wp_media` is the media file type name for WordPress\n    if (node.__type === `wordpress__wp_media`) {\n      try {\n        fileNode = await createRemoteFileNode({\n          url: node.source_url,\n          parentNodeId: node.id,\n          getCache,\n          createNode,\n          createNodeId,\n          auth: _auth,\n        })\n      } catch (e) {\n        // Ignore\n      }\n    }\n\n    // Adds a field `localFile` to the node\n    // ___NODE appendix tells Gatsby that this field will link to another node\n    if (fileNode) {\n      node.localFile___NODE = fileNode.id\n    }\n  })\n}\n```\n\nThe file node can then be queried using GraphQL. See an example of this in the [gatsby-source-wordpress README](/plugins/gatsby-source-wordpress/#image-processing) where downloaded images are queried using [gatsby-transformer-sharp](/plugins/gatsby-transformer-sharp/) to use in the component [gatsby-image](/plugins/gatsby-image/).\n\n#### Retrieving the remote file name and extension\n\nThe helper tries first to retrieve the file name and extension by parsing the url and the path provided (e.g. if the url is `https://example.com/image.jpg`, the extension will be inferred as `.jpg` and the name as `image`). If the url does not contain an extension, we use the [`file-type`](https://www.npmjs.com/package/file-type) package to infer the file type. Finally, the name and the extension _can_ be explicitly passed, like so:\n\n```javascript\ncreateRemoteFileNode({\n  // The source url of the remote file\n  url: `https://example.com/a-file-without-an-extension`,\n  parentNodeId: node.id,\n  getCache,\n  createNode,\n  createNodeId,\n  // if necessary!\n  ext: \".jpg\",\n  name: \"image\",\n})\n```\n\n### createFileNodeFromBuffer\n\nWhen working with data that isn't already stored in a file, such as when querying binary/blob fields from a database, it's helpful to cache that data to the filesystem in order to use it with other transformers that accept files as input.\n\nThe `createFileNodeFromBuffer` helper accepts a `Buffer`, caches its contents to disk, and creates a file node that points to it.\n\n## Example usage\n\nThe following example is adapted from the source of [`gatsby-source-mysql`](https://github.com/malcolm-kee/gatsby-source-mysql):\n\n```js\n// gatsby-node.js\nconst createMySqlNodes = require(`./create-nodes`)\n\nexports.sourceNodes = async ({ actions, createNodeId, getCache }, config) => {\n  const { createNode } = actions\n  const { conn, queries } = config\n  const { db, results } = await query(conn, queries)\n\n  try {\n    queries\n      .map((query, i) => ({ ...query, ___sql: results[i] }))\n      .forEach(result =>\n        createMySqlNodes(result, results, createNode, {\n          createNode,\n          createNodeId,\n          getCache,\n        })\n      )\n    db.end()\n  } catch (e) {\n    console.error(e)\n    db.end()\n  }\n}\n\n// create-nodes.js\nconst { createFileNodeFromBuffer } = require(`gatsby-source-filesystem`)\nconst createNodeHelpers = require(`gatsby-node-helpers`).default\n\nconst { createNodeFactory } = createNodeHelpers({ typePrefix: `mysql` })\n\nfunction attach(node, key, value, ctx) {\n  if (Buffer.isBuffer(value)) {\n    ctx.linkChildren.push(parentNodeId =>\n      createFileNodeFromBuffer({\n        buffer: value,\n        getCache: ctx.getCache,\n        createNode: ctx.createNode,\n        createNodeId: ctx.createNodeId,\n      })\n    )\n    value = `Buffer`\n  }\n\n  node[key] = value\n}\n\nfunction createMySqlNodes({ name, __sql, idField, keys }, results, ctx) {\n  const MySqlNode = createNodeFactory(name)\n  ctx.linkChildren = []\n\n  return __sql.forEach(row => {\n    if (!keys) keys = Object.keys(row)\n\n    const node = { id: row[idField] }\n\n    for (const key of keys) {\n      attach(node, key, row[key], ctx)\n    }\n\n    node = ctx.createNode(node)\n\n    for (const link of ctx.linkChildren) {\n      link(node.id)\n    }\n  })\n}\n\nmodule.exports = createMySqlNodes\n```\n\n## Troubleshooting\n\nIn case that due to spotty network, or slow connection, some remote files fail to download. Even after multiple retries and adjusting concurrent downloads, you can adjust timeout and retry settings with these environment variables:\n\n- `GATSBY_STALL_RETRY_LIMIT`, default: `3`\n- `GATSBY_STALL_TIMEOUT`, default: `30000`\n- `GATSBY_CONNECTION_TIMEOUT`, default: `30000`"},"npm":{"downloads":[{"from":"2021-08-30T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":60929},{"from":"2021-08-24T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":293405},{"from":"2021-08-01T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":1414077},{"from":"2021-06-02T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":4624331},{"from":"2021-03-04T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":10082404},{"from":"2020-08-31T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":20473825}],"dependentsCount":1288,"starsCount":1},"github":{"homepage":"https://www.gatsbyjs.com","starsCount":51195,"forksCount":9856,"subscribersCount":880,"issues":{"count":31487,"openCount":417,"distribution":{"3600":4955,"10800":2794,"32400":2869,"97200":4590,"291600":4059,"874800":3494,"2624400":2651,"7873200":3050,"23619600":2029,"70858800":956,"212576400":40},"isDisabled":false},"contributors":[{"username":"laurieontech","commitsCount":150},{"username":"nihgwu","commitsCount":30},{"username":"ascorbic","commitsCount":240},{"username":"devrchancay","commitsCount":13},{"username":"ThomasWang","commitsCount":17},{"username":"freiksenet","commitsCount":119},{"username":"caitlinthefirst","commitsCount":16},{"username":"davidbailey00","commitsCount":67},{"username":"resir014","commitsCount":17},{"username":"hashimwarren","commitsCount":51},{"username":"DSchau","commitsCount":354},{"username":"amberleyromo","commitsCount":112},{"username":"Khaledgarbaya","commitsCount":27},{"username":"jbolda","commitsCount":22},{"username":"Simply007","commitsCount":14},{"username":"ooloth","commitsCount":18},{"username":"fabien0102","commitsCount":13},{"username":"polarathene","commitsCount":12},{"username":"arcanis","commitsCount":23},{"username":"tesseralis","commitsCount":158},{"username":"me4502","commitsCount":16},{"username":"renovate[bot]","commitsCount":116},{"username":"daydream05","commitsCount":16},{"username":"smthomas","commitsCount":12},{"username":"Slashgear","commitsCount":17},{"username":"scottyeck","commitsCount":20},{"username":"KyleAMathews","commitsCount":2980},{"username":"LekoArts","commitsCount":379},{"username":"ChangoMan","commitsCount":12},{"username":"0x80","commitsCount":32},{"username":"coreyward","commitsCount":13},{"username":"sasurau4","commitsCount":12},{"username":"TylerBarnes","commitsCount":67},{"username":"greglobinski","commitsCount":21},{"username":"DanielSLew","commitsCount":20},{"username":"erquhart","commitsCount":19},{"username":"jbampton","commitsCount":76},{"username":"oorestisime","commitsCount":26},{"username":"duffn","commitsCount":23},{"username":"fk","commitsCount":217},{"username":"kawamataryo","commitsCount":13},{"username":"jamo","commitsCount":56},{"username":"johno","commitsCount":75},{"username":"Ekwuno","commitsCount":22},{"username":"lannonbr","commitsCount":89},{"username":"herecydev","commitsCount":23},{"username":"blainekasten","commitsCount":95},{"username":"anubhavsrivastava","commitsCount":16},{"username":"cassiebeckley","commitsCount":16},{"username":"webinista","commitsCount":23},{"username":"dandv","commitsCount":21},{"username":"hoobdeebla","commitsCount":23},{"username":"vladar","commitsCount":235},{"username":"meganesu","commitsCount":38},{"username":"jlengstorf","commitsCount":47},{"username":"madalynrose","commitsCount":16},{"username":"docwhat","commitsCount":14},{"username":"Moocar","commitsCount":51},{"username":"benjaminhoffman","commitsCount":14},{"username":"sebastienfi","commitsCount":35},{"username":"mottox2","commitsCount":64},{"username":"mathieudutour","commitsCount":13},{"username":"mgienow","commitsCount":84},{"username":"iamtraction","commitsCount":9},{"username":"ChristopherBiscardi","commitsCount":186},{"username":"ollelauribostrom","commitsCount":13},{"username":"mxstbr","commitsCount":96},{"username":"gillkyle","commitsCount":107},{"username":"dennari","commitsCount":12},{"username":"calcsam","commitsCount":133},{"username":"pvdz","commitsCount":240},{"username":"janosh","commitsCount":22},{"username":"shannonbux","commitsCount":268},{"username":"m-allanson","commitsCount":354},{"username":"kripod","commitsCount":15},{"username":"ehowey","commitsCount":16},{"username":"CanRau","commitsCount":18},{"username":"stefanprobst","commitsCount":138},{"username":"elrumordelaluz","commitsCount":13},{"username":"benstepp","commitsCount":27},{"username":"alexandernanberg","commitsCount":25},{"username":"abhishekjakhar","commitsCount":33},{"username":"jquense","commitsCount":110},{"username":"gesposito","commitsCount":13},{"username":"moonmeister","commitsCount":27},{"username":"muescha","commitsCount":301},{"username":"phacks","commitsCount":13},{"username":"abhiaiyer91","commitsCount":13},{"username":"szimek","commitsCount":12},{"username":"wardpeet","commitsCount":444},{"username":"MichaelDeBoey","commitsCount":24},{"username":"tsriram","commitsCount":29},{"username":"marcysutton","commitsCount":24},{"username":"avigoldman","commitsCount":31},{"username":"pieh","commitsCount":842},{"username":"Js-Brecht","commitsCount":17},{"username":"NickyMeuleman","commitsCount":14},{"username":"kkemple","commitsCount":26},{"username":"sidharthachatterjee","commitsCount":433},{"username":"axe312ger","commitsCount":64}],"commits":[{"from":"2021-08-24T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":15},{"from":"2021-08-01T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":205},{"from":"2021-06-02T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":489},{"from":"2021-03-04T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":999},{"from":"2020-08-31T00:00:00.000Z","to":"2021-08-31T00:00:00.000Z","count":2398}]},"source":{"files":{"readmeSize":10306,"testsSize":53974,"hasNpmIgnore":true,"hasChangelog":true},"badges":[{"urls":{"original":"https://circleci.com/gh/gatsbyjs/gatsby.svg?style=shield","service":"https://circleci.com/gh/gatsbyjs/gatsby.svg","shields":"https://img.shields.io/circleci/project/github/gatsbyjs/gatsby.svg","content":"https://img.shields.io/circleci/project/github/gatsbyjs/gatsby.json"},"info":{"service":"circleci","type":"build"}},{"urls":{"original":"https://img.shields.io/npm/v/gatsby.svg","shields":"https://img.shields.io/npm/v/gatsby.svg","content":"https://img.shields.io/npm/v/gatsby.json"},"info":{"service":"npm","type":"version","modifiers":{"type":"v"}}},{"urls":{"original":"https://img.shields.io/npm/dm/gatsby.svg","shields":"https://img.shields.io/npm/dm/gatsby.svg","content":"https://img.shields.io/npm/dm/gatsby.json"},"info":{"service":"npm","type":"downloads","modifiers":{"type":"dm"}}},{"urls":{"original":"https://img.shields.io/npm/dt/gatsby.svg","shields":"https://img.shields.io/npm/dt/gatsby.svg","content":"https://img.shields.io/npm/dt/gatsby.json"},"info":{"service":"npm","type":"downloads","modifiers":{"type":"dt"}}}],"linters":["editorconfig","eslint","prettier"],"outdatedDependencies":{"fs-extra":{"required":"^8.1.0","stable":"10.0.0","latest":"10.0.0"},"got":{"required":"^9.6.0","stable":"11.8.2","latest":"12.0.0-beta.4"}}}},"evaluation":{"quality":{"carefulness":0.9999999999999999,"tests":0.3,"health":0.6923076923076923,"branding":0.6},"popularity":{"communityInterest":62032,"downloadsCount":1541443.6666666667,"downloadsAcceleration":-2259.021727549465,"dependentsCount":1288},"maintenance":{"releasesFrequency":1,"commitsFrequency":1,"openIssues":1,"issuesDistribution":0.8104446354561292}},"score":{"final":0.8049907028223353,"detail":{"quality":0.865691754957527,"popularity":0.5583177635636034,"maintenance":0.9996341688223318}}}