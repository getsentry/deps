{"analyzedAt":"2021-08-17T01:59:34.159Z","collected":{"metadata":{"name":"ember-sinon-qunit","scope":"unscoped","version":"6.0.0","description":"Sinon sandbox test integration for QUnit","keywords":["ember-addon","sinon","qunit"],"date":"2021-05-08T00:52:12.758Z","publisher":{"username":"elwayman02","email":"hawker.jordan@gmail.com"},"maintainers":[{"username":"elwayman02","email":"hawker.jordan@gmail.com"},{"username":"scalvert","email":"steve.calvert@gmail.com"}],"contributors":[{"name":"Jordan Hawker","email":"hawker.jordan@gmail.com","url":"http://www.JordanHawker.com"},{"name":"Steve Calvert","email":"steve.calvert@gmail.com"}],"repository":{"type":"git","url":"git+https://github.com/elwayman02/ember-sinon-qunit.git"},"links":{"npm":"https://www.npmjs.com/package/ember-sinon-qunit","homepage":"https://github.com/elwayman02/ember-sinon-qunit#readme","repository":"https://github.com/elwayman02/ember-sinon-qunit","bugs":"https://github.com/elwayman02/ember-sinon-qunit/issues"},"license":"MIT","dependencies":{"broccoli-funnel":"^3.0.3","ember-cli-babel":"^7.26.3","ember-sinon":"^5.0.0"},"devDependencies":{"@ember/optional-features":"^2.0.0","@ember/test-helpers":"^2.2.5","@embroider/test-setup":"^0.37.0","@glimmer/component":"^1.0.4","@glimmer/tracking":"^1.0.4","babel-eslint":"^10.1.0","ember-auto-import":"^1.11.2","ember-cli":"~3.26.1","ember-cli-dependency-checker":"^3.2.0","ember-cli-htmlbars":"^5.7.1","ember-cli-inject-live-reload":"^2.0.2","ember-cli-release":"1.0.0-beta.2","ember-cli-sri":"^2.1.1","ember-cli-terser":"^4.0.1","ember-data":"^3.23.0","ember-disable-prototype-extensions":"^1.1.3","ember-export-application-global":"^2.0.1","ember-load-initializers":"^2.1.2","ember-maybe-import-regenerator":"^0.1.6","ember-page-title":"^6.2.1","ember-qunit":"^4.6.0","ember-resolver":"^8.0.2","ember-source":"~3.26.1","ember-source-channel-url":"^3.0.0","ember-template-lint":"^3.2.0","ember-try":"^1.4.0","eslint":"^7.23.0","eslint-config-prettier":"^8.1.0","eslint-plugin-ember":"^10.3.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.3.1","loader.js":"^4.7.0","npm-run-all":"^4.1.5","prettier":"^2.2.1","qunit-dom":"^1.6.0","sinon":"^9.2.2"},"releases":[{"from":"2021-07-18T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":0},{"from":"2021-05-19T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":0},{"from":"2021-02-18T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":2},{"from":"2020-08-17T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":2},{"from":"2019-08-18T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":5}],"hasTestScript":true,"readme":"Ember Sinon QUnit\n=================\n\n[![Build Status](https://travis-ci.org/elwayman02/ember-sinon-qunit.svg?branch=master)](https://travis-ci.org/elwayman02/ember-sinon-qunit)\n[![Ember Observer Score](http://emberobserver.com/badges/ember-sinon-qunit.svg)](http://emberobserver.com/addons/ember-sinon-qunit)\n[![Code Climate](https://codeclimate.com/github/elwayman02/ember-sinon-qunit/badges/gpa.svg)](https://codeclimate.com/github/elwayman02/ember-sinon-qunit)\n[![Codacy Badge](https://api.codacy.com/project/badge/8c6fbb028801423fbd4b1bfe17c9b1a0)](https://www.codacy.com/app/hawker-jordan/ember-sinon-qunit)\n\nThis addon integrates [`sinon`](http://jhawk.co/sinonjs) & [`ember-qunit`](http://jhawk.co/ember-qunit) \nvia [`ember-sinon`](http://jhawk.co/ember-sinon), originally inspired by [`sinon-qunit`](http://jhawk.co/sinon-qunit).\n\nWhy not simply use `ember-sinon` alone? Two reasons:\n\n1. `ember-sinon` does not handle cleanup of `ember-qunit` tests. While `sinon` \n[sandboxes itself](https://sinonjs.org/guides/migrating-to-5.0), it's up to the user to \nconsistently clean up `sinon` after each test. `ember-sinon-qunit` automatically \nrestores `sinon`'s state to ensure nothing is leaked between tests. All spies/stubs created\nwill be automatically restored to their original methods at the end of each test.\n2. `sinon` is a framework-agnostic library; as such, `ember-sinon` should be as well. This addon exists to enable\n`ember-sinon` to remove its `qunit` specific functionality, making it easier to utilize `ember-sinon` \nwith other addons like [`ember-cli-mocha`](http://jhawk.co/ember-cli-mocha), for example.\n\n\nCompatibility\n------------------------------------------------------------------------------\n\n* Sinon.js v5.0.0 or above\n* Ember.js v3.16 or above\n* Ember CLI v2.13 or above\n* Node.js v12 or above\n\n\nInstallation\n------------------------------------------------------------------------------\n\n```\nember install ember-sinon-qunit\n```\n\n\nUsage\n------------------------------------------------------------------------------\n\nTo use, import the setup method into your `tests/test-helper.js` file and execute it.\n\n```js\nimport { setApplication } from '@ember/test-helpers'; \nimport { start } from 'ember-qunit'; \nimport Application from '../app'; \nimport config from '../config/environment'; \nimport setupSinon from 'ember-sinon-qunit';\n \nsetApplication(Application.create(config.APP)); \n \nsetupSinon();\n \nstart(); \n```\n\nThis will automatically wire-up `sinon`'s setup & restoration to QUnit's `testStart` and `testDone` respectively.\n\n#### Accessing `sinon` Within Tests\n\nIn each test you are able to access `sinon` via the `sinon` object available as an import in your tests:\n\n```js\nimport { module } from 'qunit';\nimport { test } from 'ember-qunit';\nimport sinon from 'sinon';\n\nmodule('Example test', function(hooks) {\n  hooks.beforeEach(function() {\n    this.testStub = sinon.stub();\n  });\n\n  test('sinon is wired up correctly', function(assert) {\n    this.testStub();\n\n    assert.ok(this.testStub.calledOnce, 'stub was called once');\n  });\n\n  test('sinon state restored after every test run', function(assert) {\n    assert.ok(this.testStub.notCalled, 'stub cleaned up after each test run');\n  });\n});\n```\n\nThe `sinon` object's state is automatically self-contained to each specific test, allowing you to \nsafely create mocks for your tests without worrying about any overrides leaking between each test.\n\n#### Using sinon with the `@action` decorator\n\nThe `@action` decorator is used with methods to bind them to the `this` of the class. The `@action`\ndoes this by wrapping the method in a property with the `getter` of the property returning the\noriginal method bound to `this`. That means when you wish to stub or spy the method, you have to treat it as a\nproperty not a method.\n\n```js\nlet stubAction = sinon.stub(service, \"methodToStub\").get(\n    function() { \n        return null; \n    }\n);\n\nlet spyAction = sinon.spy(service, \"methodToStub\", [\"get\"]);\n\nassert.ok(stubAction.get.calledOnce);\nassert.ok(spyAction.get.calledOnce);\n```\n\nMigrating To `ember-sinon-qunit`\n------------------------------------------------------------------------------\n\n| Read this [post](https://www.jordanhawker.com/p/187541610821) to learn more about the overhaul of this package. |\n| --- |\n\nThe above functionality replaces previous features within `ember-sinon-qunit`, \nas well as the sister addons [`ember-sinon-sinoff`](https://github.com/scalvert/ember-sinon-sinoff) \nand [`ember-sinon-sandbox`](https://github.com/scalvert/ember-sinon-sandbox). \nBelow, you will find simple instructions for migrating from each of these feature sets to the new patterns.\n\n### Migration from `sinon` 5+\n\n1. Import and consume `setupSinon`.\n1. Remove any manual calls to `sinon.restore()`. It won't hurt to leave them, but they are redundant now!\n\n### Migration from older versions of `sinon`\n\n1. Import and consume `setupSinon`.\n1. Remove calls to `sinon.createSandbox()`. Anywhere you used the `sandbox` object returned by this method, \nyou can now use `sinon` directly. See the [`sinon` Migration Guide](https://sinonjs.org/guides/migrating-to-5.0) \nfor more information.\n1. Remove any manual `restore()` calls for your sandboxes.\n\n### Migration from older versions of `ember-sinon-qunit`\n\n1. Revert to using the standard [`ember-qunit`](https://github.com/emberjs/ember-qunit) test import: \n`import { test } from 'qunit';`\n1. Import and consume `setupSinon`.\n\n### Migration from `ember-sinon-sinoff` or `ember-sinon-sandbox`\n\n1. `import sinon from 'sinon';` within each test that currently uses a `sandbox`.\n1. Replace `this.sandbox` with the imported `sinon` object.\n1. Remove references to `setupSinonSinoff`/`setupSinonSandbox` from your tests.\n1. Import and consume `setupSinon`.\n\nOr, if you'd like to save some effort, try the following codemod [`ember-sinon-qunit-codemod`](https://github.com/sunwrobert/ember-sinon-qunit-codemod): \n\n```bash\ncd my-ember-app-or-addon\nnpx ember-sinon-qunit-codemod tests\n```\n\nContributing\n------------------------------------------------------------------------------\n\nSee the [Contributing](CONTRIBUTING.md) guide for details.\n\n\nLicense\n------------------------------------------------------------------------------\n\nThis project is licensed under the [MIT License](LICENSE.md)."},"npm":{"downloads":[{"from":"2021-08-16T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":0},{"from":"2021-08-10T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":16189},{"from":"2021-07-18T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":79203},{"from":"2021-05-19T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":257533},{"from":"2021-02-18T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":515547},{"from":"2020-08-17T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":990769}],"dependentsCount":2,"starsCount":1},"github":{"starsCount":53,"forksCount":22,"subscribersCount":4,"issues":{"count":480,"openCount":11,"distribution":{"3600":121,"10800":25,"32400":15,"97200":27,"291600":38,"874800":68,"2624400":73,"7873200":70,"23619600":34,"70858800":9,"212576400":0},"isDisabled":false},"contributors":[{"username":"derekwsgray","commitsCount":1},{"username":"elwayman02","commitsCount":107},{"username":"cah-briangantzler","commitsCount":1},{"username":"ember-tomster","commitsCount":1},{"username":"cibernox","commitsCount":1},{"username":"GCheung55","commitsCount":1},{"username":"sivakumar-kailasam","commitsCount":1},{"username":"greenkeeper[bot]","commitsCount":30},{"username":"simonihmig","commitsCount":1},{"username":"chrisjshull","commitsCount":6},{"username":"sunwrobert","commitsCount":1},{"username":"csantero","commitsCount":1},{"username":"snewcomer","commitsCount":3},{"username":"greenkeeperio-bot","commitsCount":25}],"commits":[{"from":"2021-08-10T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":0},{"from":"2021-07-18T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":0},{"from":"2021-05-19T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":27},{"from":"2021-02-18T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":48},{"from":"2020-08-17T00:00:00.000Z","to":"2021-08-17T00:00:00.000Z","count":86}]},"source":{"files":{"readmeSize":6318,"testsSize":11358,"hasNpmIgnore":true},"badges":[{"urls":{"original":"https://travis-ci.org/elwayman02/ember-sinon-qunit.svg?branch=master","service":"https://api.travis-ci.org/elwayman02/ember-sinon-qunit.svg?branch=master","shields":"https://img.shields.io/travis/elwayman02/ember-sinon-qunit/master.svg","content":"https://img.shields.io/travis/elwayman02/ember-sinon-qunit/master.json"},"info":{"service":"travis","type":"build","modifiers":{"branch":"master"}}}],"linters":["editorconfig","eslint","prettier"]}},"evaluation":{"quality":{"carefulness":0.9199999999999999,"tests":0.6,"health":1,"branding":0.15},"popularity":{"communityInterest":94,"downloadsCount":85844.33333333333,"downloadsAcceleration":18.844691780821904,"dependentsCount":2},"maintenance":{"releasesFrequency":0.9,"commitsFrequency":0.9002739726027398,"openIssues":1,"issuesDistribution":0.9}},"score":{"final":0.6765055719171305,"detail":{"quality":0.9203039165491579,"popularity":0.14414649200921012,"maintenance":0.999894642140456}}}